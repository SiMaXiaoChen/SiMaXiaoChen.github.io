<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 2 页 | 天意博文 | 洗去铅华，重拾初心</title>

  
  <meta name="author" content="天意">
  

  
  <meta name="description" content="这是天意同学的网络豪宅">
  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="天意博文"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="天意博文" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">天意博文</a>
    </h1>
    <p class="site-description">洗去铅华，重拾初心</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/categories">分类</a></li>
      
        <li><a href="/tags">标签</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day23/"><span>Java学习笔记_day23</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day23/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.617Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><p>进程就是正在运行的程序，进程是系统运行资源和调用的独立单位，每一个进程都有自己的内存空间和系统资源</p>
<p>多进程可以提升CPU的使用率。</p>
<p>线程是是程序的执行单元。是使用CPU的最基本单位。</p>
<p>多进程的意义是在多个进程之间，多线程的进程能够有更高的几率签到CPU的执行权</p>
<h3 id="线程调度"><a href="#线程调度" class="headerlink" title="线程调度"></a>线程调度</h3><h4 id="分时调度模型"><a href="#分时调度模型" class="headerlink" title="分时调度模型"></a>分时调度模型</h4><p>平均分配每个线程占用CPU的时间片</p>
<h4 id="抢先调度模型"><a href="#抢先调度模型" class="headerlink" title="抢先调度模型"></a>抢先调度模型</h4><p>优先让优先级高的线程使用CPU，线程级别相同则随机选择一个，java使用的是抢先调度模型</p>
<h3 id="并发和并行"><a href="#并发和并行" class="headerlink" title="并发和并行"></a>并发和并行</h3><p>并发是在某一个时间段同时运行多个程序，是逻辑上同时发生</p>
<p>并行是某一个时间点同时运行多个程序，是物理上同时发上</p>
<h3 id="jvm是否是单线程？"><a href="#jvm是否是单线程？" class="headerlink" title="jvm是否是单线程？"></a>jvm是否是单线程？</h3><p>否，是多线程，因为垃圾回收线程也要启动，否则容易内存溢出，而且还要启动主线程来调用main方法等，所以最少是两个线程。</p>
<h3 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h3><h4 id="获取线程名称"><a href="#获取线程名称" class="headerlink" title="获取线程名称"></a>获取线程名称</h4><blockquote>
<p>public final String getName():获取线程的名称。</p>
<p>public final void setName(String name):设置线程的名称</p>
<p>public static Thread currentThread():返回当前正在执行的线程对象</p>
</blockquote>
<h4 id="获取线程优先级"><a href="#获取线程优先级" class="headerlink" title="获取线程优先级"></a>获取线程优先级</h4><blockquote>
<p>public final int getPriority():返回线程对象的优先级</p>
<p>public final void setPriority(int newPriority)：更改线程的优先级</p>
</blockquote>
<p>注意：线程默认优先级是5。线程优先级的范围是：1-10。线程优先级高仅仅表示线程获取的 CPU时间片的几率高，但是要在次数比较多，或者多次运行的时候才能看到比较好的效果。</p>
<h4 id="线程控制"><a href="#线程控制" class="headerlink" title="线程控制"></a>线程控制</h4><blockquote>
<p>public static void sleep(long millis)线程休眠millis毫秒</p>
<p>public final void join()调用此方法的线程要先执行完，然后才能执行其他线程</p>
<p>public static void yield()暂停当前正在执行的线程对象，并执行其他线程，注意这个方法和第一方法都是静态方法，而第二个方法要通过线程对象调用，这个方法可以在一定程度上使线程的执行更加机会均等，但不是绝对</p>
<p>public final void setDaemon(boolean on)守护线程</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * public final void setDaemon(boolean on):将该线程标记为守护线程或用户线程。</div><div class="line"> * 当正在运行的线程都是守护线程时，Java 虚拟机退出。 该方法必须在启动线程前调用。 </div><div class="line"> * 所以当被守护的线程终止时，守护线程不会立即退出，而是在执行以一下</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadDaemonDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ThreadDaemon td1 = <span class="keyword">new</span> ThreadDaemon();</div><div class="line">		ThreadDaemon td2 = <span class="keyword">new</span> ThreadDaemon();</div><div class="line"></div><div class="line">		td1.setName(<span class="string">"关羽"</span>);</div><div class="line">		td2.setName(<span class="string">"张飞"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 设置收获线程</span></div><div class="line">		td1.setDaemon(<span class="keyword">true</span>);</div><div class="line">		td2.setDaemon(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">		td1.start();</div><div class="line">		td2.start();</div><div class="line"></div><div class="line">		Thread.currentThread().setName(<span class="string">"刘备"</span>);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">5</span>; x++) &#123;</div><div class="line">			System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + x);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>public final void stop():让线程停止，过时了，但是还可以使用。</p>
<p>public void interrupt():中断线程。 把线程的状态终止，并抛出一个InterruptedException。</p>
</blockquote>
<h3 id="线程的生命周期"><a href="#线程的生命周期" class="headerlink" title="线程的生命周期"></a>线程的生命周期</h3><ol>
<li>新建：创建线程对象</li>
<li>就绪：线程对象已经启动，有执行资格，但是没有CPU的执行权</li>
<li>运行：有执行资格有执行权</li>
<li>阻塞：没有执行资格没有执行权；结束阻塞，有执行资格没有执行权也就是就绪状态</li>
<li><p>死亡：线程对象变成垃圾，等待回收</p>
<p><img src="E:\picture\生命周期.png" alt="生命周期"></p>
</li>
</ol>
<h3 id="创建多线程的方式"><a href="#创建多线程的方式" class="headerlink" title="创建多线程的方式"></a>创建多线程的方式</h3><h4 id="继承Thread类"><a href="#继承Thread类" class="headerlink" title="继承Thread类"></a>继承Thread类</h4><ol>
<li>继承Threadlei</li>
<li>重写run方法</li>
<li>创建对象</li>
<li>调用start方法，启动线程</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">		 MyThread my = <span class="keyword">new</span> MyThread();</div><div class="line">		 <span class="comment">// 启动线程</span></div><div class="line">		 my.run();</div><div class="line">		 my.run();</div><div class="line"><span class="comment">//		 IllegalThreadStateException:非法的线程状态异常</span></div><div class="line"><span class="comment">//		 因为这个相当于是my线程被调用了两次。而不是两个线程启动。</span></div></pre></td></tr></table></figure>
<p>注意：线程不能被多次启动</p>
<p>run()和start()的区别？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// run():仅仅是封装被线程执行的代码，直接调用是普通方法</span></div><div class="line"><span class="comment">// start():首先启动了线程，然后再由jvm去调用该线程的run()方法，start方法有两个步骤，而run方法只是底层封装被多线程执行的程序</span></div></pre></td></tr></table></figure>
<h4 id="实现Runnable接口"><a href="#实现Runnable接口" class="headerlink" title="实现Runnable接口"></a>实现Runnable接口</h4><ol>
<li>创建Runnable的实现子类</li>
<li>重写run方法，Runnable只有一个方法</li>
<li>创建子类的对象</li>
<li>创建线程对象，并且把runnable的子类实现对象传入</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">100</span>; x++) &#123;</div><div class="line">			<span class="comment">// 由于实现接口的方式就不能直接使用Thread类的方法了,但是可以间接的使用</span></div><div class="line">			System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + x);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：调用当前线程的方法获得名字的方法，也是调用其他Thread方法的思想<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">// 创建MyRunnable类的对象</span></div><div class="line">	MyRunnable my = <span class="keyword">new</span> MyRunnable();</div><div class="line"></div><div class="line">	<span class="comment">// 创建Thread类的对象，并把C步骤的对象作为构造参数传递</span></div><div class="line">	<span class="comment">// Thread(Runnable target)</span></div><div class="line">	 Thread t1 = <span class="keyword">new</span> Thread(my);</div><div class="line">	 Thread t2 = <span class="keyword">new</span> Thread(my);</div><div class="line">	 t1.setName(<span class="string">"林青霞"</span>);</div><div class="line">	 t2.setName(<span class="string">"刘意"</span>);</div><div class="line"></div><div class="line">	<span class="comment">// Thread(Runnable target, String name)</span></div><div class="line">	Thread t1 = <span class="keyword">new</span> Thread(my, <span class="string">"林青霞"</span>);</div><div class="line">	Thread t2 = <span class="keyword">new</span> Thread(my, <span class="string">"刘意"</span>);</div><div class="line"></div><div class="line">	t1.start();</div><div class="line">	t2.start();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="方式2的好处"><a href="#方式2的好处" class="headerlink" title="方式2的好处"></a>方式2的好处</h4><ol>
<li>可以避免java单继承的缺点</li>
<li>适合多个程序处理同一个资源的情况</li>
</ol>
<h4 id="第三种方式"><a href="#第三种方式" class="headerlink" title="第三种方式"></a>第三种方式</h4><p>依赖于线程池</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Callable:是带泛型的接口。</span></div><div class="line"><span class="comment">//这里指定的泛型其实是call()方法的返回值类型。</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">String</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">100</span>; x++) &#123;</div><div class="line">			System.out.println(Thread.currentThread().getName() + <span class="string">":"</span> + x);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里是可以带有返回值区别上面两种</p>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 线程求和案例</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> number;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyCallable</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.number = number;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">		<span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">1</span>; x &lt;= number; x++) &#123;</div><div class="line">			sum += x;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> sum;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CallableDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException </span>&#123;</div><div class="line">		<span class="comment">// 创建线程池对象</span></div><div class="line">		ExecutorService pool = Executors.newFixedThreadPool(<span class="number">2</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 可以执行Runnable对象或者Callable对象代表的线程</span></div><div class="line">		Future&lt;Integer&gt; f1 = pool.submit(<span class="keyword">new</span> MyCallable(<span class="number">100</span>));</div><div class="line">		Future&lt;Integer&gt; f2 = pool.submit(<span class="keyword">new</span> MyCallable(<span class="number">200</span>));</div><div class="line"></div><div class="line">		<span class="comment">// V get()</span></div><div class="line">		Integer i1 = f1.get();</div><div class="line">		Integer i2 = f2.get();</div><div class="line"></div><div class="line">		System.out.println(i1);</div><div class="line">		System.out.println(i2);</div><div class="line"></div><div class="line">		<span class="comment">// 结束</span></div><div class="line">		pool.shutdown();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="电影票练习题"><a href="#电影票练习题" class="headerlink" title="电影票练习题"></a>电影票练习题</h3><p>某电影院目前正在上映贺岁大片，共有100张票，而它有3个售票窗口售票，请设计一个程序模拟该电影院售票</p>
<h4 id="实现电影票的代码"><a href="#实现电影票的代码" class="headerlink" title="实现电影票的代码"></a>实现电影票的代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicket</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">// 定义100张票</span></div><div class="line">	<span class="comment">// private int tickets = 100;</span></div><div class="line">	<span class="comment">// 为了让多个线程对象共享这100张票，我们其实应该用静态修饰</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// 定义100张票</span></div><div class="line">		<span class="comment">// 每个线程进来都会走这里，这样的话，每个线程对象相当于买的是自己的那100张票，这不合理，所以应该定义到外面</span></div><div class="line">		<span class="comment">// int tickets = 100;</span></div><div class="line"></div><div class="line">		<span class="comment">// 是为了模拟一直有票</span></div><div class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) &#123;</div><div class="line">				System.out.println(getName() + <span class="string">"正在出售第"</span> + (tickets--) + <span class="string">"张票"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：想要每个类的对象单独有一个成员变量那么就可以时private int来修饰，但是想让此类的所有对象共享一个成员变量，那么就应该用privat static int 来修饰</p>
<h4 id="实现测试类"><a href="#实现测试类" class="headerlink" title="实现测试类"></a>实现测试类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicketDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建三个线程对象</span></div><div class="line">		SellTicket st1 = <span class="keyword">new</span> SellTicket();</div><div class="line">		SellTicket st2 = <span class="keyword">new</span> SellTicket();</div><div class="line">		SellTicket st3 = <span class="keyword">new</span> SellTicket();</div><div class="line"></div><div class="line">		<span class="comment">// 给线程对象起名字</span></div><div class="line">		st1.setName(<span class="string">"窗口1"</span>);</div><div class="line">		st2.setName(<span class="string">"窗口2"</span>);</div><div class="line">		st3.setName(<span class="string">"窗口3"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 启动线程</span></div><div class="line">		st1.start();</div><div class="line">		st2.start();</div><div class="line">		st3.start();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用方式二来实现"><a href="#使用方式二来实现" class="headerlink" title="使用方式二来实现"></a>使用方式二来实现</h3><h4 id="模拟卖票类"><a href="#模拟卖票类" class="headerlink" title="模拟卖票类"></a>模拟卖票类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicket</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">	<span class="comment">// 定义100张票</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) &#123;</div><div class="line">				System.out.println(Thread.currentThread().getName() + <span class="string">"正在出售第"</span></div><div class="line">						+ (tickets--) + <span class="string">"张票"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：这里和上个方法的ststic修饰不同</p>
<h4 id="写测试类"><a href="#写测试类" class="headerlink" title="写测试类"></a>写测试类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SellTicketDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建资源对象</span></div><div class="line">		SellTicket st = <span class="keyword">new</span> SellTicket();</div><div class="line"></div><div class="line">		<span class="comment">// 创建三个线程对象</span></div><div class="line">		Thread t1 = <span class="keyword">new</span> Thread(st, <span class="string">"窗口1"</span>);</div><div class="line">		Thread t2 = <span class="keyword">new</span> Thread(st, <span class="string">"窗口2"</span>);</div><div class="line">		Thread t3 = <span class="keyword">new</span> Thread(st, <span class="string">"窗口3"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 启动线程</span></div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">		t3.start();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="电影票改进版"><a href="#电影票改进版" class="headerlink" title="电影票改进版"></a>电影票改进版</h3><p>每次卖票延迟100毫秒</p>
<ul>
<li>问题：还出现了负数的票</li>
</ul>
<p>随机性和延迟导致</p>
<ul>
<li>出现相同的票</li>
</ul>
<p>CPU的一次操作必须时原子性的</p>
<p>##同步机制</p>
<h3 id="判断线程安全问题的原因"><a href="#判断线程安全问题的原因" class="headerlink" title="判断线程安全问题的原因"></a>判断线程安全问题的原因</h3><ol>
<li>是否是多线程的环境</li>
<li>是否有共享数据</li>
<li>是否有多条语句操作共享数据</li>
</ol>
<blockquote>
<p>判断标准同时也是解决问题的思路，即使程序不满足条件（第三条）</p>
</blockquote>
<h3 id="同步代码块"><a href="#同步代码块" class="headerlink" title="同步代码块"></a>同步代码块</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">同步代码块：</div><div class="line">		<span class="keyword">synchronized</span>(对象)&#123;</div><div class="line">			需要同步的代码;也就是多条语句操作共享数据的代码块</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<p>注意：同步安全的关键就是在那个对象，多个线程必须是同一把锁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</div><div class="line"><span class="comment">//创建锁对象</span></div><div class="line"><span class="keyword">private</span> Object obj = <span class="keyword">new</span> Object();</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">		<span class="keyword">synchronized</span> (obj) &#123;</div><div class="line">			<span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					Thread.sleep(<span class="number">100</span>);</div><div class="line">				&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">					e.printStackTrace();</div><div class="line">				&#125;</div><div class="line">				System.out.println(Thread.currentThread().getName()</div><div class="line">						+ <span class="string">"正在出售第"</span> + (tickets--) + <span class="string">"张票"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="同步的特点"><a href="#同步的特点" class="headerlink" title="同步的特点"></a>同步的特点</h3><ol>
<li>多个线程</li>
<li>多个线程使用的是同意锁对象</li>
</ol>
<h3 id="同步的优缺点"><a href="#同步的优缺点" class="headerlink" title="同步的优缺点"></a>同步的优缺点</h3><p>优点：解决了多线程的安全问题</p>
<p>缺点：每个线程都会判断锁，耗费资源，降低效率</p>
<h3 id="同步的其他问题"><a href="#同步的其他问题" class="headerlink" title="同步的其他问题"></a>同步的其他问题</h3><ul>
<li>同步代码块的锁对象是谁？</li>
</ul>
<p>任意对象</p>
<ul>
<li>同步方法的锁对象是谁？</li>
</ul>
<p>this</p>
<ul>
<li>同步方法的锁对象是谁？</li>
</ul>
<p>类的字节码文件</p>
<h2 id="回顾以前类的安全"><a href="#回顾以前类的安全" class="headerlink" title="回顾以前类的安全"></a>回顾以前类的安全</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 线程安全的类</span></div><div class="line">StringBuffer sb = <span class="keyword">new</span> StringBuffer();</div><div class="line">Vector&lt;String&gt; v = <span class="keyword">new</span> Vector&lt;String&gt;();</div><div class="line">Hashtable&lt;String, String&gt; h = <span class="keyword">new</span> Hashtable&lt;String, String&gt;();</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Vector是线程安全的时候才去考虑使用的，但是我还说过即使要安全，我也不用你</span></div><div class="line"><span class="comment">// 那么到底用谁呢?</span></div><div class="line"><span class="comment">// public static &lt;T&gt; List&lt;T&gt; synchronizedList(List&lt;T&gt; list)</span></div><div class="line">List&lt;String&gt; list1 = <span class="keyword">new</span> ArrayList&lt;String&gt;();<span class="comment">// 线程不安全</span></div><div class="line">List&lt;String&gt; list2 = Collections</div><div class="line">		.synchronizedList(<span class="keyword">new</span> ArrayList&lt;String&gt;()); <span class="comment">// 线程安全</span></div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day23/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day22/"><span>Java学习笔记_day22</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day22/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.476Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="注册IO版"><a href="#注册IO版" class="headerlink" title="注册IO版"></a>注册IO版</h2><blockquote>
<p>在局部变量初始化是null时，那么在后面调用的时候一定要判断是否为空</p>
<p>关闭流的操作放在finally语句中</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</div><div class="line">	<span class="comment">// 为了保证文件一加载就创建</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> File file = <span class="keyword">new</span> File(<span class="string">"user.txt"</span>);</div><div class="line"></div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			file.createNewFile();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			System.out.println(<span class="string">"创建文件失败"</span>);</div><div class="line">			<span class="comment">// e.printStackTrace();</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLogin</span><span class="params">(String username, String password)</span> </span>&#123;</div><div class="line">		<span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">		BufferedReader br = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="comment">// br = new BufferedReader(new FileReader("user.txt"));</span></div><div class="line">			br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(file));</div><div class="line">			String line = <span class="keyword">null</span>;</div><div class="line">			<span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">				<span class="comment">// 用户名=密码</span></div><div class="line">				String[] datas = line.split(<span class="string">"="</span>);</div><div class="line">				<span class="keyword">if</span> (datas[<span class="number">0</span>].equals(username) &amp;&amp; datas[<span class="number">1</span>].equals(password)) &#123;</div><div class="line">					flag = <span class="keyword">true</span>;</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</div><div class="line">			System.out.println(<span class="string">"用户登录找不到信息所在的文件"</span>);</div><div class="line">			<span class="comment">// e.printStackTrace();</span></div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			System.out.println(<span class="string">"用户登录失败"</span>);</div><div class="line">			<span class="comment">// e.printStackTrace();</span></div><div class="line">		&#125; <span class="keyword">finally</span> &#123;</div><div class="line">			<span class="keyword">if</span> (br != <span class="keyword">null</span>) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					br.close();</div><div class="line">				&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">					System.out.println(<span class="string">"用户登录释放资源失败"</span>);</div><div class="line">					<span class="comment">// e.printStackTrace();</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> flag;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">		<span class="comment">/*</span></div><div class="line">		 * 为了让注册的数据能够有一定的规则，我就自己定义了一个规则： 用户名=密码</div><div class="line">		 */</div><div class="line">		BufferedWriter bw = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="comment">// bw = new BufferedWriter(new FileWriter("user.txt"));</span></div><div class="line">			<span class="comment">// bw = new BufferedWriter(new FileWriter(file));</span></div><div class="line">			<span class="comment">// 为了保证数据是追加写入，必须加true</span></div><div class="line">			bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(file, <span class="keyword">true</span>));</div><div class="line">			bw.write(user.getUsername() + <span class="string">"="</span> + user.getPassword());</div><div class="line">			bw.newLine();</div><div class="line">			bw.flush();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			System.out.println(<span class="string">"用户注册失败"</span>);</div><div class="line">			<span class="comment">// e.printStackTrace();</span></div><div class="line">		&#125; <span class="keyword">finally</span> &#123;</div><div class="line">			<span class="keyword">if</span> (bw != <span class="keyword">null</span>) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					bw.close();</div><div class="line">				&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">					System.out.println(<span class="string">"用户注册释放资源失败"</span>);</div><div class="line">					<span class="comment">// e.printStackTrace();</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：文件名的命名</p>
<p>注意标签flag的返回，注意静态语句块的使用</p>
<h2 id="操作基本数据类型的流"><a href="#操作基本数据类型的流" class="headerlink" title="操作基本数据类型的流"></a>操作基本数据类型的流</h2><h3 id="DataInputStream"><a href="#DataInputStream" class="headerlink" title="DataInputStream"></a>DataInputStream</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DataInputStream(InputStream in)</div></pre></td></tr></table></figure>
<h3 id="DataOutputStream"><a href="#DataOutputStream" class="headerlink" title="DataOutputStream"></a>DataOutputStream</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DataOutputStream(OutputStream out)</div></pre></td></tr></table></figure>
<h2 id="内存操作流"><a href="#内存操作流" class="headerlink" title="内存操作流"></a>内存操作流</h2><h3 id="字节数组"><a href="#字节数组" class="headerlink" title="字节数组"></a>字节数组</h3><ul>
<li>ByteArrayInputStream</li>
</ul>
<p>底层是一个byte数组，不用关闭流，即使关闭流，在调用函数也不会产生io异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//close方法</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<ul>
<li>ByteArrayOutputStream</li>
</ul>
<p>底层是一个byte数组，不用关闭流，即使关闭流，在调用函数也不会产生io异常</p>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	<span class="comment">// 写数据</span></div><div class="line">	<span class="comment">// ByteArrayOutputStream()</span></div><div class="line">	ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</div><div class="line"></div><div class="line">	<span class="comment">// 写数据</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++) &#123;</div><div class="line">		baos.write((<span class="string">"hello"</span> + x).getBytes());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 释放资源</span></div><div class="line">	<span class="comment">// 通过查看源码我们知道这里什么都没做，所以根本需要close()</span></div><div class="line">	 baos.close();</div><div class="line"></div><div class="line">	<span class="comment">// public byte[] toByteArray()</span></div><div class="line">	<span class="keyword">byte</span>[] bys = baos.toByteArray();</div><div class="line"></div><div class="line">	<span class="comment">// 读数据</span></div><div class="line">	<span class="comment">// ByteArrayInputStream(byte[] buf)</span></div><div class="line">	ByteArrayInputStream bais = <span class="keyword">new</span> ByteArrayInputStream(bys);</div><div class="line"></div><div class="line">	<span class="keyword">int</span> by = <span class="number">0</span>;</div><div class="line">	<span class="keyword">while</span> ((by = bais.read()) != -<span class="number">1</span>) &#123;</div><div class="line">		System.out.print((<span class="keyword">char</span>) by);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// bais.close();</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>操作流程：</p>
<ol>
<li>创建ByteArrayOutputStream输出流</li>
<li>写数据，注意getBytes方法</li>
<li>通过ByteArrayOutputStream的toByteArray方法把输出内容转换从字节数组（因为ByteArrayInputStream的构造方法需要一个字节数组）</li>
<li>创建ByteArrayInputStream输入流</li>
<li>读取数据，和字节流的读取数据一样，注意要把byte转换成char</li>
</ol>
<blockquote>
<p>当有中文字符时一个字节的byte无法表示，所以要用CharArrayReader，用法一样</p>
</blockquote>
<h3 id="字符数组"><a href="#字符数组" class="headerlink" title="字符数组"></a>字符数组</h3><ul>
<li>CharArrayReader</li>
</ul>
<ul>
<li>CharArrayWriter</li>
</ul>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><ul>
<li>StringReader</li>
</ul>
<ul>
<li>StringWriter</li>
</ul>
<h2 id="打印流"><a href="#打印流" class="headerlink" title="打印流"></a>打印流</h2><p>打印流只有输出流，只能写数据；可以操作任意类型的数据；开启自动刷新能够自动刷新；可以直接操作文本文件</p>
<blockquote>
<p>可以操作文本文件的类</p>
<p>FileInputStream————–FileOutputStream</p>
<p>FileReader———————-FileWriter</p>
<p>PrintStream——————–PrintWriter</p>
<p>buffer类不能直接操作文件</p>
</blockquote>
<p>流的分类：</p>
<ol>
<li>基本流：可以直接读取文件</li>
<li>高级流：在基本流提供其他功能</li>
</ol>
<p><strong>查看API，流的构造方法如果同时又File类型和String类型的参数，一般来说就是可以直接操作文件的</strong></p>
<h3 id="字节流打印流PrintStream"><a href="#字节流打印流PrintStream" class="headerlink" title="字节流打印流PrintStream"></a>字节流打印流PrintStream</h3><h3 id="字符打印流PrintWriter"><a href="#字符打印流PrintWriter" class="headerlink" title="字符打印流PrintWriter"></a>字符打印流PrintWriter</h3><p>作为writer的子类使用时一定要关闭流，否则数据不会写进文件</p>
<p>可以打印任意类型的方法是print而不是write方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pw.print(<span class="keyword">true</span>);</div><div class="line">pw.print(<span class="number">100</span>);</div><div class="line">pw.print(<span class="string">"hello"</span>);</div></pre></td></tr></table></figure>
<p>启动自动刷新：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PrintWriter pw = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> FileWriter(<span class="string">"pw2.txt"</span>), <span class="keyword">true</span>);</div></pre></td></tr></table></figure>
<p>启动自动刷新时：调用 println、printf 或 format 方法将刷新输出缓冲区，即不用close就可以写入文件</p>
<blockquote>
<p>println()方法其实等价于于：bw.write()    bw.newLine()        bw.flush();</p>
</blockquote>
<h4 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：DataStreamDemo.java复制到Copy.java中</div><div class="line"> * 数据源：</div><div class="line"> * 		DataStreamDemo.java -- 读取数据 -- FileReader -- BufferedReader</div><div class="line"> * 目的地：</div><div class="line"> * 		Copy.java -- 写出数据 -- FileWriter -- BufferedWriter -- PrintWriter</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFileDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 以前的版本</span></div><div class="line">		<span class="comment">// 封装数据源</span></div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"DataStreamDemo.java"</span>));</div><div class="line">		<span class="comment">// 封装目的地</span></div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"Copy.java"</span>));</div><div class="line"></div><div class="line">		String line = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="comment">//这三句通常一起写</span></div><div class="line">			bw.write(line);</div><div class="line">			bw.newLine();</div><div class="line">			bw.flush();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bw.close();</div><div class="line">		br.close();</div><div class="line"></div><div class="line">		<span class="comment">// 打印流的改进版</span></div><div class="line">		<span class="comment">// 封装数据源</span></div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"DataStreamDemo.java"</span>));</div><div class="line">		<span class="comment">// 封装目的地</span></div><div class="line">		PrintWriter pw = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> FileWriter(<span class="string">"Copy.java"</span>), <span class="keyword">true</span>);</div><div class="line"></div><div class="line">		String line = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">			pw.println(line);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		pw.close();</div><div class="line">		br.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：打印字符流是调用的println方法</p>
<p>PrintWriter的底层也封装了BufferedWriter，所以此类也是高效的</p>
<h2 id="标准输入输出流"><a href="#标准输入输出流" class="headerlink" title="标准输入输出流"></a>标准输入输出流</h2><blockquote>
<p>public static final InputStream in “标准”输入流</p>
<p>public static final PrintStream out “标准”输出流。</p>
</blockquote>
<h3 id="输出流"><a href="#输出流" class="headerlink" title="输出流"></a>输出流</h3><p>输出语句的本质：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"helloworld"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 获取标准输出流对象</span></div><div class="line">PrintStream ps = System.out;</div><div class="line">ps.println(<span class="string">"helloworld"</span>);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//转换流的思想		</span></div><div class="line">BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(</div><div class="line">		System.out));</div><div class="line"></div><div class="line">bw.write(<span class="string">"hello"</span>);</div><div class="line">bw.newLine();</div><div class="line"><span class="comment">// bw.flush();</span></div><div class="line">bw.write(<span class="string">"world"</span>);</div><div class="line">bw.newLine();</div><div class="line"><span class="comment">// bw.flush();</span></div><div class="line">bw.write(<span class="string">"java"</span>);</div><div class="line">bw.newLine();</div><div class="line">bw.flush();</div><div class="line"></div><div class="line">bw.close();</div></pre></td></tr></table></figure>
<h3 id="输入流"><a href="#输入流" class="headerlink" title="输入流"></a>输入流</h3><p>键盘录入数据的几种方式：</p>
<p>A:main方法的args接收参数。</p>
<p>​    java HelloWorld hello world java</p>
<p>B:Scanner(JDK5以后的)</p>
<p>​    Scanner sc = new Scanner(System.in);</p>
<p>​    String s = sc.nextLine();</p>
<p>​    int x = sc.nextInt()</p>
<p>C:通过字符缓冲流包装标准输入流实现</p>
<p>​    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));</p>
<h4 id="第三种方式的示例代码"><a href="#第三种方式的示例代码" class="headerlink" title="第三种方式的示例代码"></a>第三种方式的示例代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line"></div><div class="line">System.out.println(<span class="string">"请输入一个字符串："</span>);</div><div class="line">String line = br.readLine();</div><div class="line">System.out.println(<span class="string">"你输入的字符串是："</span> + line);</div><div class="line"></div><div class="line">System.out.println(<span class="string">"请输入一个整数："</span>);</div><div class="line"><span class="comment">// int i = Integer.parseInt(br.readLine());</span></div><div class="line">line = br.readLine();</div><div class="line"><span class="keyword">int</span> i = Integer.parseInt(line);</div><div class="line">System.out.println(<span class="string">"你输入的整数是："</span> + i);</div></pre></td></tr></table></figure>
<p>注意：integer类的paseInt方法，还有字节流和字符流转换的思想</p>
<h2 id="随机访问流"><a href="#随机访问流" class="headerlink" title="随机访问流"></a>随机访问流</h2><p>RandomAccessFile类不属于流，是Object类的子类。但它融合了InputStream和OutputStream的功能。支持对随机访问文件的读取和写入</p>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">RandomAccessFile</span><span class="params">(String name,String mode)</span>：</span></div><div class="line">第一个参数是文件路径，第二个参数是操作文件的模式。</div><div class="line">模式有四种，我们最常用的一种叫"rw",这种方式表示我既可以写数据，也可以读取数据</div></pre></td></tr></table></figure>
<h3 id="示例代码-1"><a href="#示例代码-1" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomAccessFileDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// write();</span></div><div class="line">		read();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 创建随机访问流对象</span></div><div class="line">		RandomAccessFile raf = <span class="keyword">new</span> RandomAccessFile(<span class="string">"raf.txt"</span>, <span class="string">"rw"</span>);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> i = raf.readInt();</div><div class="line">		System.out.println(i);</div><div class="line">		<span class="comment">// 该文件指针可以通过 getFilePointer方法读取，并通过 seek 方法设置。</span></div><div class="line">		System.out.println(<span class="string">"当前文件的指针位置是："</span> + raf.getFilePointer());</div><div class="line"></div><div class="line">		<span class="keyword">char</span> ch = raf.readChar();</div><div class="line">		System.out.println(ch);</div><div class="line">		System.out.println(<span class="string">"当前文件的指针位置是："</span> + raf.getFilePointer());</div><div class="line"></div><div class="line">		String s = raf.readUTF();</div><div class="line">		System.out.println(s);</div><div class="line">		System.out.println(<span class="string">"当前文件的指针位置是："</span> + raf.getFilePointer());</div><div class="line"></div><div class="line">		<span class="comment">// 我不想重头开始了，我就要读取a，怎么办呢?</span></div><div class="line">		raf.seek(<span class="number">4</span>);</div><div class="line">		ch = raf.readChar();</div><div class="line">		System.out.println(ch);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 创建随机访问流对象</span></div><div class="line">		RandomAccessFile raf = <span class="keyword">new</span> RandomAccessFile(<span class="string">"raf.txt"</span>, <span class="string">"rw"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 怎么玩呢?</span></div><div class="line">		raf.writeInt(<span class="number">100</span>);</div><div class="line">		raf.writeChar(<span class="string">'a'</span>);</div><div class="line">		raf.writeUTF(<span class="string">"中国"</span>);</div><div class="line"></div><div class="line">		raf.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="合并流SequenceInputStream"><a href="#合并流SequenceInputStream" class="headerlink" title="合并流SequenceInputStream"></a>合并流SequenceInputStream</h2><p>SequenceInputStream类可以将多个输入流串流在一起，合并为一个输入流，因此，该流也被称为合并流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// SequenceInputStream(InputStream s1, InputStream s2)</span></div><div class="line"><span class="comment">// 需求：把ByteArrayStreamDemo.java和DataStreamDemo.java的内容复制到Copy.java中</span></div><div class="line">InputStream s1 = <span class="keyword">new</span> FileInputStream(<span class="string">"ByteArrayStreamDemo.java"</span>);</div><div class="line">InputStream s2 = <span class="keyword">new</span> FileInputStream(<span class="string">"DataStreamDemo.java"</span>);</div><div class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(s1, s2);</div><div class="line">BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</div><div class="line">		<span class="keyword">new</span> FileOutputStream(<span class="string">"Copy.java"</span>));</div><div class="line"></div><div class="line"><span class="comment">// 如何写读写呢，其实很简单，你就按照以前怎么读写，现在还是怎么读写</span></div><div class="line"><span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((len = sis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">	bos.write(bys, <span class="number">0</span>, len);</div><div class="line">&#125;</div><div class="line"></div><div class="line">bos.close();</div><div class="line">sis.close();</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 需求：把下面的三个文件的内容复制到Copy.java中</span></div><div class="line"><span class="comment">// ByteArrayStreamDemo.java,CopyFileDemo.java,DataStreamDemo.java</span></div><div class="line"></div><div class="line"><span class="comment">// SequenceInputStream(Enumeration e)</span></div><div class="line"><span class="comment">// 通过简单的回顾我们知道了Enumeration是Vector中的一个方法的返回值类型。</span></div><div class="line"><span class="comment">// Enumeration&lt;E&gt; elements()</span></div><div class="line">		<span class="comment">// 需求：把下面的三个文件的内容复制到Copy.java中</span></div><div class="line"><span class="comment">// ByteArrayStreamDemo.java,CopyFileDemo.java,DataStreamDemo.java</span></div><div class="line"></div><div class="line"><span class="comment">// SequenceInputStream(Enumeration e)</span></div><div class="line"><span class="comment">// 通过简单的回顾我们知道了Enumeration是Vector中的一个方法的返回值类型。</span></div><div class="line"><span class="comment">// Enumeration&lt;E&gt; elements()</span></div><div class="line">Vector&lt;InputStream&gt; v = <span class="keyword">new</span> Vector&lt;InputStream&gt;();</div><div class="line">InputStream s1 = <span class="keyword">new</span> FileInputStream(<span class="string">"ByteArrayStreamDemo.java"</span>);</div><div class="line">InputStream s2 = <span class="keyword">new</span> FileInputStream(<span class="string">"CopyFileDemo.java"</span>);</div><div class="line">InputStream s3 = <span class="keyword">new</span> FileInputStream(<span class="string">"DataStreamDemo.java"</span>);</div><div class="line">v.add(s1);</div><div class="line">v.add(s2);</div><div class="line">v.add(s3);</div><div class="line">Enumeration&lt;InputStream&gt; en = v.elements();</div><div class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(en);</div><div class="line">BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</div><div class="line">		<span class="keyword">new</span> FileOutputStream(<span class="string">"Copy.java"</span>));</div><div class="line"></div><div class="line"><span class="comment">// 如何写读写呢，其实很简单，你就按照以前怎么读写，现在还是怎么读写</span></div><div class="line"><span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((len = sis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">	bos.write(bys, <span class="number">0</span>, len);</div><div class="line">&#125;</div><div class="line"></div><div class="line">bos.close();</div><div class="line">sis.close();&lt;InputStream&gt; v = <span class="keyword">new</span> Vector&lt;InputStream&gt;();</div><div class="line">InputStream s1 = <span class="keyword">new</span> FileInputStream(<span class="string">"ByteArrayStreamDemo.java"</span>);</div><div class="line">InputStream s2 = <span class="keyword">new</span> FileInputStream(<span class="string">"CopyFileDemo.java"</span>);</div><div class="line">InputStream s3 = <span class="keyword">new</span> FileInputStream(<span class="string">"DataStreamDemo.java"</span>);</div><div class="line">v.add(s1);</div><div class="line">v.add(s2);</div><div class="line">v.add(s3);</div><div class="line">Enumeration&lt;InputStream&gt; en = v.elements();</div><div class="line">SequenceInputStream sis = <span class="keyword">new</span> SequenceInputStream(en);</div><div class="line">BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</div><div class="line">		<span class="keyword">new</span> FileOutputStream(<span class="string">"Copy.java"</span>));</div><div class="line"></div><div class="line"><span class="comment">// 如何写读写呢，其实很简单，你就按照以前怎么读写，现在还是怎么读写</span></div><div class="line"><span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((len = sis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">	bos.write(bys, <span class="number">0</span>, len);</div><div class="line">&#125;</div><div class="line"></div><div class="line">bos.close();</div><div class="line">sis.close();</div></pre></td></tr></table></figure>
<p>注意：Vector和Enumeration的使用</p>
<h2 id="序列化流"><a href="#序列化流" class="headerlink" title="序列化流"></a>序列化流</h2><p>Java序列化是指把Java对象转换为字节序列的过程，从而实现对象的持久化；而Java反序列化是指把字节序列恢复为Java对象的过程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException,</span></div><div class="line">		ClassNotFoundException &#123;</div><div class="line">	<span class="comment">// 由于我们要对对象进行序列化，所以我们先自定义一个类</span></div><div class="line">	<span class="comment">// 序列化数据其实就是把对象写到文本文件</span></div><div class="line">	<span class="comment">// write();</span></div><div class="line"></div><div class="line">	read();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</div><div class="line">	<span class="comment">// 创建反序列化对象</span></div><div class="line">	ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(</div><div class="line">			<span class="string">"oos.txt"</span>));</div><div class="line"></div><div class="line">	<span class="comment">// 还原对象</span></div><div class="line">	Object obj = ois.readObject();</div><div class="line"></div><div class="line">	<span class="comment">// 释放资源</span></div><div class="line">	ois.close();</div><div class="line"></div><div class="line">	<span class="comment">// 输出对象</span></div><div class="line">	System.out.println(obj);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	<span class="comment">// 创建序列化流对象</span></div><div class="line">	ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(</div><div class="line">			<span class="string">"oos.txt"</span>));</div><div class="line"></div><div class="line">	<span class="comment">// 创建对象</span></div><div class="line">	Person p = <span class="keyword">new</span> Person(<span class="string">"林青霞"</span>, <span class="number">27</span>);</div><div class="line"></div><div class="line">	<span class="comment">// public final void writeObject(Object obj)</span></div><div class="line">	oos.writeObject(p);</div><div class="line"></div><div class="line">	<span class="comment">// 释放资源</span></div><div class="line">	oos.close();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在使用序列化接口的时候，在javaBean的文件中我们必须实现序列化接口Serializable，而且要要创建一个静态的成员变量来防止当类改变造成无法读取对象的问题，ecplise可以自动生成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">2071565876962058344L</span>;</div></pre></td></tr></table></figure>
<blockquote>
<p>NotSerializableException:未序列化异常</p>
<p>使用transient关键字声明不需要序列化的成员变量</p>
<p>  序列化流：把对象按照流一样的方式存入文本文件或者在网络中传输。对象 – 流数据(ObjectOutputStream)<br>  反序列化流:把文本文件中的流对象数据或者网络中的流对象数据还原成对象。流数据 – 对象(ObjectInputStream)</p>
</blockquote>
<h2 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h2><p>继承自Hashtable所以底层是一个Map,是一个属性集合类，可以保存在流中，也可以从流中加载</p>
<blockquote>
<p>该类在API中没有&lt;&gt;所以不能添加泛型</p>
</blockquote>
<h3 id="作为Map集合使用"><a href="#作为Map集合使用" class="headerlink" title="作为Map集合使用"></a>作为Map集合使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Properties prop = <span class="keyword">new</span> Properties();</div><div class="line"></div><div class="line"><span class="comment">// 添加元素</span></div><div class="line">prop.put(<span class="string">"it002"</span>, <span class="string">"hello"</span>);</div><div class="line">prop.put(<span class="string">"it001"</span>, <span class="string">"world"</span>);</div><div class="line">prop.put(<span class="string">"it003"</span>, <span class="string">"java"</span>);</div><div class="line"></div><div class="line"><span class="comment">// System.out.println("prop:" + prop);</span></div><div class="line"></div><div class="line"><span class="comment">// 遍历集合</span></div><div class="line">Set&lt;Object&gt; set = prop.keySet();</div><div class="line"><span class="keyword">for</span> (Object key : set) &#123;</div><div class="line">	Object value = prop.get(key);</div><div class="line">	System.out.println(key + <span class="string">"---"</span> + value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意集合的遍历得到key的集合再增强for循环</p>
<h3 id="特殊功能"><a href="#特殊功能" class="headerlink" title="特殊功能"></a>特殊功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">setProperty</span><span class="params">(String key,String value)</span>：添加元素</span></div><div class="line"><span class="keyword">public</span> String <span class="title">getProperty</span><span class="params">(String key)</span>:获取元素</div><div class="line"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">stringPropertyNames</span><span class="params">()</span>:获取所有的键的集合</div></pre></td></tr></table></figure>
<p>注意键的值是字符串一定要使用它的特殊功能，使用父类功能是Object类型，setProperty的本质：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> Object <span class="title">setProperty</span><span class="params">(String key, String value)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> put(key, value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>就是调用父类的put方法，但是此时传入的参数是String类型，而不是父类的Object类型，这种封装思想可以方方便的使用特定类型的数据</p>
<h3 id="和IO流的结合使用"><a href="#和IO流的结合使用" class="headerlink" title="和IO流的结合使用"></a>和IO流的结合使用</h3><blockquote>
<p> public void load(Reader reader):把文件中的数据读取到集合中</p>
<p> public void store(Writer writer,String comments):把集合中的数据存储到文件</p>
</blockquote>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	<span class="comment">// myLoad();</span></div><div class="line"></div><div class="line">	myStore();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">myStore</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	<span class="comment">// 创建集合对象</span></div><div class="line">	Properties prop = <span class="keyword">new</span> Properties();</div><div class="line"></div><div class="line">	prop.setProperty(<span class="string">"林青霞"</span>, <span class="string">"27"</span>);</div><div class="line">	prop.setProperty(<span class="string">"武鑫"</span>, <span class="string">"30"</span>);</div><div class="line">	prop.setProperty(<span class="string">"刘晓曲"</span>, <span class="string">"18"</span>);</div><div class="line">	</div><div class="line">	<span class="comment">//public void store(Writer writer,String comments):把集合中的数据存储到文件</span></div><div class="line">	Writer w = <span class="keyword">new</span> FileWriter(<span class="string">"name.txt"</span>);</div><div class="line">	prop.store(w, <span class="string">"helloworld"</span>);</div><div class="line">	w.close();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">myLoad</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">	Properties prop = <span class="keyword">new</span> Properties();</div><div class="line"></div><div class="line">	<span class="comment">// public void load(Reader reader):把文件中的数据读取到集合中</span></div><div class="line">	<span class="comment">// 注意：这个文件的数据必须是键值对形式</span></div><div class="line">	Reader r = <span class="keyword">new</span> FileReader(<span class="string">"prop.txt"</span>);</div><div class="line">	prop.load(r);</div><div class="line">	r.close();</div><div class="line"></div><div class="line">	System.out.println(<span class="string">"prop:"</span> + prop);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####练习题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 我有一个文本文件(user.txt)，我知道数据是键值对形式的，但是不知道内容是什么。</div><div class="line"> * 请写一个程序判断是否有“lisi”这样的键存在，如果有就改变其实为”100”</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:把文件中的数据加载到集合中</div><div class="line"> * 		B:遍历集合，获取得到每一个键</div><div class="line"> * 		C:判断键是否有为"lisi"的，如果有就修改其值为"100"</div><div class="line"> * 		D:把集合中的数据重新存储到文件中</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesTest</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 把文件中的数据加载到集合中</span></div><div class="line">		Properties prop = <span class="keyword">new</span> Properties();</div><div class="line">		Reader r = <span class="keyword">new</span> FileReader(<span class="string">"user.txt"</span>);</div><div class="line">		prop.load(r);</div><div class="line">		r.close();</div><div class="line"></div><div class="line">		<span class="comment">// 遍历集合，获取得到每一个键</span></div><div class="line">		Set&lt;String&gt; set = prop.stringPropertyNames();</div><div class="line">		<span class="keyword">for</span> (String key : set) &#123;</div><div class="line">			<span class="comment">// 判断键是否有为"lisi"的，如果有就修改其值为"100"</span></div><div class="line">			<span class="keyword">if</span> (<span class="string">"lisi"</span>.equals(key)) &#123;</div><div class="line">				prop.setProperty(key, <span class="string">"100"</span>);</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 把集合中的数据重新存储到文件中</span></div><div class="line">		Writer w = <span class="keyword">new</span> FileWriter(<span class="string">"user.txt"</span>);</div><div class="line">		prop.store(w, <span class="keyword">null</span>);</div><div class="line">		w.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意每个流关闭的时间</p>
<h4 id="练习题二"><a href="#练习题二" class="headerlink" title="练习题二"></a>练习题二</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 我有一个猜数字小游戏的程序，请写一个程序实现在测试类中只能用5次，超过5次提示：游戏试玩已结束，请付费。</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesTest2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line"></div><div class="line">		<span class="comment">// 把数据加载到集合中</span></div><div class="line">		Properties prop = <span class="keyword">new</span> Properties();</div><div class="line">		Reader r = <span class="keyword">new</span> FileReader(<span class="string">"count.txt"</span>);</div><div class="line">		prop.load(r);</div><div class="line">		r.close();</div><div class="line"></div><div class="line">		<span class="comment">// 我自己的程序，我当然知道里面的键是谁</span></div><div class="line">		String value = prop.getProperty(<span class="string">"count"</span>);</div><div class="line">		<span class="keyword">int</span> number = Integer.parseInt(value);</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (number &gt; <span class="number">5</span>) &#123;</div><div class="line">			System.out.println(<span class="string">"游戏试玩已结束，请付费。"</span>);</div><div class="line">			System.exit(<span class="number">0</span>);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			number++;</div><div class="line">			prop.setProperty(<span class="string">"count"</span>, String.valueOf(number));</div><div class="line">			Writer w = <span class="keyword">new</span> FileWriter(<span class="string">"count.txt"</span>);</div><div class="line">			prop.store(w, <span class="keyword">null</span>);</div><div class="line">			w.close();</div><div class="line"></div><div class="line">			GuessNumber.start();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意stirng.valueOf的写法和Integer.parseInt(value)的写法</p>
<h2 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h2><p>NIO其实就是新IO的意思，可以像访问内存一样访问文件</p>
<h2 id="JDK的IO改进"><a href="#JDK的IO改进" class="headerlink" title="JDK的IO改进"></a>JDK的IO改进</h2><ul>
<li>Path:与平台无关的路径。</li>
</ul>
<ul>
<li>Paths:包含了返回Path的静态方法。</li>
</ul>
<blockquote>
<p>public static <a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/nio/file/Path.html" target="_blank" rel="external">Path</a> get(<a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/net/URI.html" target="_blank" rel="external">URI</a> uri):根据给定的URI来确定文件路径。</p>
</blockquote>
<ul>
<li>Files:操作文件的工具类。提供了大量的方法，简单了解如下方法</li>
</ul>
<blockquote>
<p>public static long copy(<a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/nio/file/Path.html" target="_blank" rel="external">Path</a> source,<a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/io/OutputStream.html" target="_blank" rel="external">OutputStream</a> out):复制文件</p>
<p>public static <a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/nio/file/Path.html" target="_blank" rel="external">Path</a> write(<a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/nio/file/Path.html" target="_blank" rel="external">Path</a> path, <a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/lang/Iterable.html" target="_blank" rel="external">Iterable</a>&lt;?extends <a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/lang/CharSequence.html" target="_blank" rel="external">CharSequence</a>&gt; lines,<a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/nio/charset/Charset.html" target="_blank" rel="external">Charset</a> cs, <a href="mk:@MSITStore:E:\JavaSE\API\JDK_API7.0.CHM::/java/nio/file/OpenOption.html" target="_blank" rel="external">OpenOption</a>… options):</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ArrayList&lt;String&gt; array = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">array.add(<span class="string">"hello"</span>);</div><div class="line">array.add(<span class="string">"world"</span>);</div><div class="line">array.add(<span class="string">"java"</span>);</div><div class="line">Files.write(Paths.get(<span class="string">"array.txt"</span>), array, Charset.forName(<span class="string">"GBK"</span>));</div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day22/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day21/"><span>Java学习笔记_day21</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day21/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.335Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="编码表"><a href="#编码表" class="headerlink" title="编码表"></a>编码表</h2><p>由现实世界的字符和对应的字符构成</p>
<h3 id="常见编码表"><a href="#常见编码表" class="headerlink" title="常见编码表"></a>常见编码表</h3><table>
<thead>
<tr>
<th style="text-align:center">编码表</th>
<th style="text-align:center">位数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ASCII</td>
<td style="text-align:center">一个字节的7位最多128</td>
</tr>
<tr>
<td style="text-align:center">ISO-8859-1拉丁编码表</td>
<td style="text-align:center">一个字节8位最多256</td>
</tr>
<tr>
<td style="text-align:center">GB2312简体</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">GBK简体中文的升级版</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">GB18030码表</td>
<td style="text-align:center">GBK的取代版本</td>
</tr>
<tr>
<td style="text-align:center">BIG-5繁体字编码表</td>
<td style="text-align:center">俗称大五码</td>
</tr>
<tr>
<td style="text-align:center">Unicode国际标准码</td>
<td style="text-align:center">2个字节</td>
</tr>
<tr>
<td style="text-align:center">UTF-8</td>
<td style="text-align:center">最多用3个字节</td>
</tr>
</tbody>
</table>
<blockquote>
<p>UTF-8能用一个就用ASCII，两个就用Unicode，最后用三个字节</p>
</blockquote>
<p>系统默认字符集是GBK</p>
<p>string和bytes可以使用自定义的字符集来相互转换：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">String s = <span class="string">"你好"</span>;</div><div class="line"><span class="comment">// String -- byte[]		</span></div><div class="line"><span class="keyword">byte</span>[] bys1 = s.getBytes(<span class="string">"GBK"</span>);<span class="comment">// [-60, -29, -70, -61]</span></div><div class="line"></div><div class="line">System.out.println(Arrays.toString(bys));</div><div class="line"></div><div class="line"><span class="comment">// byte[] -- String</span></div><div class="line">String ss = <span class="keyword">new</span> String(bys); <span class="comment">// 你好</span></div><div class="line">String ss1 = <span class="keyword">new</span> String(bys, <span class="string">"GBK"</span>); <span class="comment">// 你好</span></div></pre></td></tr></table></figure>
<h2 id="字符流OutputStreamWriter"><a href="#字符流OutputStreamWriter" class="headerlink" title="字符流OutputStreamWriter"></a>字符流OutputStreamWriter</h2><h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">OutputStreamWriter(OutputStream out):根据默认编码把字节流的数据转换为字符流</div><div class="line">OutputStreamWriter(OutputStream out,String charsetName):根据指定编码把字节流数据转换为字符流</div></pre></td></tr></table></figure>
<h3 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> c)</span>:写一个字符</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">char</span>[] cbuf)</span>:写一个字符数组</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">char</span>[] cbuf,<span class="keyword">int</span> off,<span class="keyword">int</span> len)</span>:写一个字符数组的一部分</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String str)</span>:写一个字符串</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(String str,<span class="keyword">int</span> off,<span class="keyword">int</span> len)</span>:写一个字符串的一部分</div></pre></td></tr></table></figure>
<blockquote>
<p>一个字符两个字节</p>
<p>字符流写数据一定要调用flush方法，否则不会写进文件，因为此时字符在缓冲中，文件存储的单位是字符，但是你写的是字节</p>
</blockquote>
<h3 id="close-和flush-的区别"><a href="#close-和flush-的区别" class="headerlink" title="close()和flush()的区别"></a>close()和flush()的区别</h3><p>close()关闭流对象，但是先刷新一次缓冲区。关闭之后，流对象不可以继续再使用了</p>
<p>flush()仅仅刷新缓冲区,刷新之后，流对象还可以继续使用</p>
<h3 id="实现子类"><a href="#实现子类" class="headerlink" title="实现子类"></a>实现子类</h3><p>OutputStreamWriter = FileOutputStream + 编码表(GBK)</p>
<p>FileWriter = FileOutputStream + 编码表(GBK)</p>
<h2 id="InputStreamReader"><a href="#InputStreamReader" class="headerlink" title="InputStreamReader"></a>InputStreamReader</h2><h3 id="构造方法-1"><a href="#构造方法-1" class="headerlink" title="构造方法"></a>构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">InputStreamReader(InputStream is):用默认的编码读取数据</div><div class="line">InputStreamReader(InputStream is,String charsetName):用指定的编码读取数据</div></pre></td></tr></table></figure>
<h3 id="成员方法-1"><a href="#成员方法-1" class="headerlink" title="成员方法"></a>成员方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span>:一次读取一个字符</span></div><div class="line"></div><div class="line"><span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">char</span>[] chs)</span>:一次读取一个字符数组</div></pre></td></tr></table></figure>
<p>读取数据示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 读取数据</span></div><div class="line"><span class="comment">// 一次读取一个字符</span></div><div class="line"><span class="keyword">int</span> ch = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((ch = isr.read()) != -<span class="number">1</span>) &#123;</div><div class="line">	System.out.print((<span class="keyword">char</span>) ch);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 一次读取一个字符数组</span></div><div class="line"><span class="keyword">char</span>[] chs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((len = isr.read(chs)) != -<span class="number">1</span>) &#123;</div><div class="line">	System.out.print(<span class="keyword">new</span> String(chs, <span class="number">0</span>, len));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="实现子类-1"><a href="#实现子类-1" class="headerlink" title="实现子类"></a>实现子类</h3><p>InputStreamReader = FileInputStream + 编码表(GBK)</p>
<p>FileReader = FileInputStream + 编码表(GBK)</p>
<h2 id="字符缓冲流"><a href="#字符缓冲流" class="headerlink" title="字符缓冲流"></a>字符缓冲流</h2><p>###BufferedReader</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * BufferedReader</div><div class="line"> * 从字符输入流中读取文本，缓冲各个字符，从而实现字符、数组和行的高效读取。 </div><div class="line"> * 可以指定缓冲区的大小，或者可使用默认的大小。大多数情况下，默认值就足够大了。 </div><div class="line"> * </div><div class="line"> * BufferedReader(Reader in)</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedReaderDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 创建字符缓冲输入流对象</span></div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"bw.txt"</span>));</div><div class="line"></div><div class="line">		<span class="comment">// 方式1</span></div><div class="line">		<span class="keyword">int</span> ch = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((ch = br.read()) != -<span class="number">1</span>) &#123;</div><div class="line">			System.out.print((<span class="keyword">char</span>) ch);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 方式2</span></div><div class="line">		<span class="keyword">char</span>[] chs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((len = br.read(chs)) != -<span class="number">1</span>) &#123;</div><div class="line">			System.out.print(<span class="keyword">new</span> String(chs, <span class="number">0</span>, len));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 释放资源</span></div><div class="line">		br.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="BufferedWriter"><a href="#BufferedWriter" class="headerlink" title="BufferedWriter"></a>BufferedWriter</h3><p>将文本写入字符输出流，缓冲各个字符，从而提供单个字符、数组和字符串的高效写入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 字符缓冲流的特殊方法：</div><div class="line"> * BufferedWriter:</div><div class="line"> * 		public void newLine():根据系统来决定换行符</div><div class="line"> * BufferedReader:</div><div class="line"> * 		public String readLine()：一次读取一行数据</div><div class="line"> * 		包含该行内容的字符串，不包含任何行终止符，如果已到达流末尾，则返回 null</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// write();</span></div><div class="line">		read();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 创建字符缓冲输入流对象</span></div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"bw2.txt"</span>));</div><div class="line"></div><div class="line">		String line = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">			System.out.println(line);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="comment">//释放资源</span></div><div class="line">		br.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 创建字符缓冲输出流对象</span></div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"bw2.txt"</span>));</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++) &#123;</div><div class="line">			bw.write(<span class="string">"hello"</span> + x);</div><div class="line">			<span class="comment">// bw.write("\r\n");</span></div><div class="line">			bw.newLine();</div><div class="line">			bw.flush();</div><div class="line">		&#125;</div><div class="line">		bw.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：bw.write(“hello” + x);不包括换行符号，所以要添加newLine方法，作为换行符号</p>
<blockquote>
<p>newLine是写换行符号</p>
</blockquote>
<p> <img src="E:\picture\IO流小结图解.png" alt="IO流小结图解"></p>
<h3 id="字符流复制的练习"><a href="#字符流复制的练习" class="headerlink" title="字符流复制的练习"></a>字符流复制的练习</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 复制文本文件</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		复制数据，如果我们知道用记事本打开并能够读懂，就用字符流，否则用字节流。</div><div class="line"> * 		通过该原理，我们知道我们应该采用字符流更方便一些。</div><div class="line"> * 		而字符流有5种方式，所以做这个题目我们有5种方式。推荐掌握第5种。</div><div class="line"> * 数据源：</div><div class="line"> * 		c:\\a.txt -- FileReader -- BufferdReader</div><div class="line"> * 目的地：</div><div class="line"> * 		d:\\b.txt -- FileWriter -- BufferedWriter</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFileDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		String srcString = <span class="string">"c:\\a.txt"</span>;</div><div class="line">		String destString = <span class="string">"d:\\b.txt"</span>;</div><div class="line">		<span class="comment">// method1(srcString, destString);</span></div><div class="line">		<span class="comment">// method2(srcString, destString);</span></div><div class="line">		<span class="comment">// method3(srcString, destString);</span></div><div class="line">		<span class="comment">// method4(srcString, destString);</span></div><div class="line">		method5(srcString, destString);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 字符缓冲流一次读写一个字符串</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method5</span><span class="params">(String srcString, String destString)</span></span></div><div class="line">			<span class="keyword">throws</span> IOException &#123;</div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(srcString));</div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(destString));</div><div class="line"></div><div class="line">		String line = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">			bw.write(line);</div><div class="line">			bw.newLine();</div><div class="line">			bw.flush();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bw.close();</div><div class="line">		br.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 字符缓冲流一次读写一个字符数组</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method4</span><span class="params">(String srcString, String destString)</span></span></div><div class="line">			<span class="keyword">throws</span> IOException &#123;</div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(srcString));</div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(destString));</div><div class="line"></div><div class="line">		<span class="keyword">char</span>[] chs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((len = br.read(chs)) != -<span class="number">1</span>) &#123;</div><div class="line">			bw.write(chs, <span class="number">0</span>, len);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bw.close();</div><div class="line">		br.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 字符缓冲流一次读写一个字符</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method3</span><span class="params">(String srcString, String destString)</span></span></div><div class="line">			<span class="keyword">throws</span> IOException &#123;</div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(srcString));</div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(destString));</div><div class="line"></div><div class="line">		<span class="keyword">int</span> ch = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((ch = br.read()) != -<span class="number">1</span>) &#123;</div><div class="line">			bw.write(ch);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bw.close();</div><div class="line">		br.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 基本字符流一次读写一个字符数组</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">(String srcString, String destString)</span></span></div><div class="line">			<span class="keyword">throws</span> IOException &#123;</div><div class="line">		FileReader fr = <span class="keyword">new</span> FileReader(srcString);</div><div class="line">		FileWriter fw = <span class="keyword">new</span> FileWriter(destString);</div><div class="line"></div><div class="line">		<span class="keyword">char</span>[] chs = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((len = fr.read(chs)) != -<span class="number">1</span>) &#123;</div><div class="line">			fw.write(chs, <span class="number">0</span>, len);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		fw.close();</div><div class="line">		fr.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 基本字符流一次读写一个字符</span></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">(String srcString, String destString)</span></span></div><div class="line">			<span class="keyword">throws</span> IOException &#123;</div><div class="line">		FileReader fr = <span class="keyword">new</span> FileReader(srcString);</div><div class="line">		FileWriter fw = <span class="keyword">new</span> FileWriter(destString);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> ch = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((ch = fr.read()) != -<span class="number">1</span>) &#123;</div><div class="line">			fw.write(ch);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		fw.close();</div><div class="line">		fr.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我有一个文本文件中存储了几个名称，请大家写一个程序实现随机获取一个人的名字</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetName</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 把文本文件中的数据存储到集合中</span></div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"b.txt"</span>));</div><div class="line">		ArrayList&lt;String&gt; array = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">		String line = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">			array.add(line);</div><div class="line">		&#125;</div><div class="line">		br.close();</div><div class="line"></div><div class="line">		<span class="comment">// 随机产生一个索引</span></div><div class="line">		Random r = <span class="keyword">new</span> Random();</div><div class="line">		<span class="keyword">int</span> index = r.nextInt(array.size());</div><div class="line"></div><div class="line">		<span class="comment">// 根据该索引获取一个值</span></div><div class="line">		String name = array.get(index);</div><div class="line">		System.out.println(<span class="string">"该幸运者是："</span> + name);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：random类和math中的随机数的区别</p>
<p>复制指定目录下的指定文件，并修改后缀名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：复制指定目录下的指定文件，并修改后缀名。</div><div class="line"> * 指定的文件是：.java文件。</div><div class="line"> * 指定的后缀名是：.jad</div><div class="line"> * 指定的目录是：jad</div><div class="line"> * </div><div class="line"> * 数据源：e:\\java\\A.java</div><div class="line"> * 目的地：e:\\jad\\A.jad</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:封装目录</div><div class="line"> * 		B:获取该目录下的java文件的File数组</div><div class="line"> * 		C:遍历该File数组，得到每一个File对象</div><div class="line"> * 		D:把该File进行复制</div><div class="line"> * 		E:在目的地目录下改名</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFolderDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 封装目录</span></div><div class="line">		File srcFolder = <span class="keyword">new</span> File(<span class="string">"e:\\java"</span>);</div><div class="line">		<span class="comment">// 封装目的地</span></div><div class="line">		File destFolder = <span class="keyword">new</span> File(<span class="string">"e:\\jad"</span>);</div><div class="line">		<span class="comment">// 如果目的地目录不存在，就创建</span></div><div class="line">		<span class="keyword">if</span> (!destFolder.exists()) &#123;</div><div class="line">			destFolder.mkdir();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 获取该目录下的java文件的File数组</span></div><div class="line">		File[] fileArray = srcFolder.listFiles(<span class="keyword">new</span> FilenameFilter() &#123;</div><div class="line">			<span class="meta">@Override</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</div><div class="line">				<span class="keyword">return</span> <span class="keyword">new</span> File(dir, name).isFile() &amp;&amp; name.endsWith(<span class="string">".java"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line"></div><div class="line">		<span class="comment">// 遍历该File数组，得到每一个File对象</span></div><div class="line">		<span class="keyword">for</span> (File file : fileArray) &#123;</div><div class="line">			<span class="comment">// System.out.println(file);</span></div><div class="line">			<span class="comment">// 数据源：e:\java\DataTypeDemo.java</span></div><div class="line">			<span class="comment">// 目的地：e:\\jad\DataTypeDemo.java</span></div><div class="line">			String name = file.getName();</div><div class="line">			File newFile = <span class="keyword">new</span> File(destFolder, name);</div><div class="line">			copyFile(file, newFile);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 在目的地目录下改名</span></div><div class="line">		File[] destFileArray = destFolder.listFiles();</div><div class="line">		<span class="keyword">for</span> (File destFile : destFileArray) &#123;</div><div class="line">			<span class="comment">// System.out.println(destFile);</span></div><div class="line">			<span class="comment">// e:\jad\DataTypeDemo.java</span></div><div class="line">			<span class="comment">// e:\\jad\\DataTypeDemo.jad</span></div><div class="line">			String name =destFile.getName(); <span class="comment">//DataTypeDemo.java</span></div><div class="line">			String newName = name.replace(<span class="string">".java"</span>, <span class="string">".jad"</span>);<span class="comment">//DataTypeDemo.jad</span></div><div class="line">			</div><div class="line">			File newFile = <span class="keyword">new</span> File(destFolder,newName);</div><div class="line">			destFile.renameTo(newFile);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(File file, File newFile)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(</div><div class="line">				file));</div><div class="line">		BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</div><div class="line">				<span class="keyword">new</span> FileOutputStream(newFile));</div><div class="line"></div><div class="line">		<span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((len = bis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">			bos.write(bys, <span class="number">0</span>, len);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bos.close();</div><div class="line">		bis.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：复制多极文件夹</div><div class="line"> * </div><div class="line"> * 数据源：E:\JavaSE\day21\code\demos</div><div class="line"> * 目的地：E:\\</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:封装数据源File</div><div class="line"> * 		B:封装目的地File</div><div class="line"> * 		C:判断该File是文件夹还是文件</div><div class="line"> * 			a:是文件夹</div><div class="line"> * 				就在目的地目录下创建该文件夹</div><div class="line"> * 				获取该File对象下的所有文件或者文件夹File对象</div><div class="line"> * 				遍历得到每一个File对象</div><div class="line"> * 				回到C</div><div class="line"> * 			b:是文件</div><div class="line"> * 				就复制(字节流)</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFoldersDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 封装数据源File</span></div><div class="line">		File srcFile = <span class="keyword">new</span> File(<span class="string">"E:\\JavaSE\\day21\\code\\demos"</span>);</div><div class="line">		<span class="comment">// 封装目的地File</span></div><div class="line">		File destFile = <span class="keyword">new</span> File(<span class="string">"E:\\"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 复制文件夹的功能</span></div><div class="line">		copyFolder(srcFile, destFile);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFolder</span><span class="params">(File srcFile, File destFile)</span></span></div><div class="line">			<span class="keyword">throws</span> IOException &#123;</div><div class="line">		<span class="comment">// 判断该File是文件夹还是文件</span></div><div class="line">		<span class="keyword">if</span> (srcFile.isDirectory()) &#123;</div><div class="line">			<span class="comment">// 文件夹</span></div><div class="line">			File newFolder = <span class="keyword">new</span> File(destFile, srcFile.getName());</div><div class="line">			newFolder.mkdir();</div><div class="line"></div><div class="line">			<span class="comment">// 获取该File对象下的所有文件或者文件夹File对象</span></div><div class="line">			File[] fileArray = srcFile.listFiles();</div><div class="line">			<span class="keyword">for</span> (File file : fileArray) &#123;</div><div class="line">				copyFolder(file, newFolder);</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="comment">// 文件</span></div><div class="line">			File newFile = <span class="keyword">new</span> File(destFile, srcFile.getName());</div><div class="line">			copyFile(srcFile, newFile);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(File srcFile, File newFile)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(</div><div class="line">				srcFile));</div><div class="line">		BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</div><div class="line">				<span class="keyword">new</span> FileOutputStream(newFile));</div><div class="line"></div><div class="line">		<span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">		<span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((len = bis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">			bos.write(bys, <span class="number">0</span>, len);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		bos.close();</div><div class="line">		bis.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 键盘录入5个学生信息(姓名,语文成绩,数学成绩,英语成绩),按照总分从高到低存入文本文件</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:创建学生类</div><div class="line"> * 		B:创建集合对象</div><div class="line"> * 			TreeSet&lt;Student&gt;</div><div class="line"> * 		C:键盘录入学生信息存储到集合</div><div class="line"> * 		D:遍历集合，把数据写到文本文件</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		TreeSet&lt;Student&gt; ts = <span class="keyword">new</span> TreeSet&lt;Student&gt;(<span class="keyword">new</span> Comparator&lt;Student&gt;() &#123;</div><div class="line">			<span class="meta">@Override</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student s1, Student s2)</span> </span>&#123;</div><div class="line">				<span class="keyword">int</span> num = s2.getSum() - s1.getSum();</div><div class="line">				<span class="keyword">int</span> num2 = num == <span class="number">0</span> ? s1.getChinese() - s2.getChinese() : num;</div><div class="line">				<span class="keyword">int</span> num3 = num2 == <span class="number">0</span> ? s1.getMath() - s2.getMath() : num2;</div><div class="line">				<span class="keyword">int</span> num4 = num3 == <span class="number">0</span> ? s1.getEnglish() - s2.getEnglish() : num3;</div><div class="line">				<span class="keyword">int</span> num5 = num4 == <span class="number">0</span> ? s1.getName().compareTo(s2.getName())</div><div class="line">						: num4;</div><div class="line">				<span class="keyword">return</span> num5;</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line"></div><div class="line">		<span class="comment">// 键盘录入学生信息存储到集合</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">1</span>; x &lt;= <span class="number">5</span>; x++) &#123;</div><div class="line">			Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">			System.out.println(<span class="string">"请录入第"</span> + x + <span class="string">"个的学习信息"</span>);</div><div class="line">			System.out.println(<span class="string">"姓名："</span>);</div><div class="line">			String name = sc.nextLine();</div><div class="line">			System.out.println(<span class="string">"语文成绩："</span>);</div><div class="line">			<span class="keyword">int</span> chinese = sc.nextInt();</div><div class="line">			System.out.println(<span class="string">"数学成绩："</span>);</div><div class="line">			<span class="keyword">int</span> math = sc.nextInt();</div><div class="line">			System.out.println(<span class="string">"英语成绩："</span>);</div><div class="line">			<span class="keyword">int</span> english = sc.nextInt();</div><div class="line"></div><div class="line">			<span class="comment">// 创建学生对象</span></div><div class="line">			Student s = <span class="keyword">new</span> Student();</div><div class="line">			s.setName(name);</div><div class="line">			s.setChinese(chinese);</div><div class="line">			s.setMath(math);</div><div class="line">			s.setEnglish(english);</div><div class="line"></div><div class="line">			<span class="comment">// 把学生信息添加到集合</span></div><div class="line">			ts.add(s);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 遍历集合，把数据写到文本文件</span></div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"students.txt"</span>));</div><div class="line">		bw.write(<span class="string">"学生信息如下："</span>);</div><div class="line">		bw.newLine();</div><div class="line">		bw.flush();</div><div class="line">		bw.write(<span class="string">"姓名,语文成绩,数学成绩,英语成绩"</span>);</div><div class="line">		bw.newLine();</div><div class="line">		bw.flush();</div><div class="line">		<span class="keyword">for</span> (Student s : ts) &#123;</div><div class="line">			StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line">			sb.append(s.getName()).append(<span class="string">","</span>).append(s.getChinese())</div><div class="line">					.append(<span class="string">","</span>).append(s.getMath()).append(<span class="string">","</span>)</div><div class="line">					.append(s.getEnglish());</div><div class="line">			bw.write(sb.toString());</div><div class="line">			bw.newLine();</div><div class="line">			bw.flush();</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// 释放资源</span></div><div class="line">		bw.close();</div><div class="line">		System.out.println(<span class="string">"学习信息存储完毕"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：上面代码的stringBuilder的用法和TreeSet的用法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 已知s.txt文件中有这样的一个字符串：“hcexfgijkamdnoqrzstuvwybpl”</div><div class="line"> * 请编写程序读取数据内容，把数据排序后写入ss.txt中。</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:把s.txt这个文件给做出来</div><div class="line"> * 		B:读取该文件的内容，存储到一个字符串中</div><div class="line"> * 		C:把字符串转换为字符数组</div><div class="line"> * 		D:对字符数组进行排序</div><div class="line"> * 		E:把排序后的字符数组转换为字符串</div><div class="line"> * 		F:把字符串再次写入ss.txt中</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">// 读取该文件的内容，存储到一个字符串中</span></div><div class="line">		BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"s.txt"</span>));</div><div class="line">		String line = br.readLine();</div><div class="line">		br.close();</div><div class="line"></div><div class="line">		<span class="comment">// 把字符串转换为字符数组</span></div><div class="line">		<span class="keyword">char</span>[] chs = line.toCharArray();</div><div class="line"></div><div class="line">		<span class="comment">// 对字符数组进行排序</span></div><div class="line">		Arrays.sort(chs);</div><div class="line"></div><div class="line">		<span class="comment">// 把排序后的字符数组转换为字符串</span></div><div class="line">		String s = <span class="keyword">new</span> String(chs);</div><div class="line"></div><div class="line">		<span class="comment">// 把字符串再次写入ss.txt中</span></div><div class="line">		BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"ss.txt"</span>));</div><div class="line">		bw.write(s);</div><div class="line">		bw.newLine();</div><div class="line">		bw.flush();</div><div class="line"></div><div class="line">		bw.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：上面代码的arrays类的用法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 用Reader模拟BufferedReader的readLine()功能</div><div class="line"> * </div><div class="line"> * readLine():一次读取一行，根据换行符判断是否结束，只返回内容，不返回换行符</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBufferedReader</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> Reader r;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyBufferedReader</span><span class="params">(Reader r)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.r = r;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/*</span></div><div class="line">	 * 思考：写一个方法，返回值是一个字符串。</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">readLine</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="comment">/*</span></div><div class="line">		 * 我要返回一个字符串，我该怎么办呢? 我们必须去看看r对象能够读取什么东西呢? 两个读取方法，一次读取一个字符或者一次读取一个字符数组</div><div class="line">		 * 那么，我们要返回一个字符串，用哪个方法比较好呢? 我们很容易想到字符数组比较好，但是问题来了，就是这个数组的长度是多长呢?</div><div class="line">		 * 根本就没有办法定义数组的长度，你定义多长都不合适。 所以，只能选择一次读取一个字符。</div><div class="line">		 * 但是呢，这种方式的时候，我们再读取下一个字符的时候，上一个字符就丢失了 所以，我们又应该定义一个临时存储空间把读取过的字符给存储起来。</div><div class="line">		 * 这个用谁比较和是呢?数组，集合，字符串缓冲区三个可供选择。</div><div class="line">		 * 数组不知道大小，集合麻烦，经过简单的分析，最终选择使用字符串缓冲区对象。并且使用的是StringBuilder</div><div class="line">		 */</div><div class="line">		StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line"></div><div class="line">		<span class="comment">// 做这个读取最麻烦的是判断结束，但是在结束之前应该是一直读取，直到-1</span></div><div class="line"></div><div class="line">		<span class="keyword">int</span> ch = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((ch = r.read()) != -<span class="number">1</span>) &#123; <span class="comment">//104,101,108,108,111</span></div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">'\r'</span>) &#123;</div><div class="line">				<span class="keyword">continue</span>;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">'\n'</span>) &#123;</div><div class="line">				<span class="keyword">return</span> sb.toString(); <span class="comment">//hello</span></div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				sb.append((<span class="keyword">char</span>)ch); <span class="comment">//hello</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 为了防止数据丢失，就是最后一行没有按下换行直接结束</span></div><div class="line">		<span class="keyword">if</span> (sb.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">return</span> sb.toString();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/*</span></div><div class="line">	 * 先写一个关闭方法</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="keyword">this</span>.r.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意:在stringBUilder调用append方法时一定要转换成char否则打印出的是数字</p>
<p>注意这种利用已知类来实现自定义功能的封装方法，有私有变量，构造方法，还有成员方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//模拟LineNumberReader的获取line行号的功能</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLineNumberReader</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> Reader r;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> lineNumber = <span class="number">0</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyLineNumberReader</span><span class="params">(Reader r)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.r = r;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLineNumber</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// lineNumber++;</span></div><div class="line">		<span class="keyword">return</span> lineNumber;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLineNumber</span><span class="params">(<span class="keyword">int</span> lineNumber)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.lineNumber = lineNumber;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">readLine</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		lineNumber++;</div><div class="line"></div><div class="line">		StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line"></div><div class="line">		<span class="keyword">int</span> ch = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span> ((ch = r.read()) != -<span class="number">1</span>) &#123;</div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">'\r'</span>) &#123;</div><div class="line">				<span class="keyword">continue</span>;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (ch == <span class="string">'\n'</span>) &#123;</div><div class="line">				<span class="keyword">return</span> sb.toString();</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				sb.append((<span class="keyword">char</span>) ch);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (sb.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">			<span class="keyword">return</span> sb.toString();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">		<span class="keyword">this</span>.r.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day21/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day20/"><span>Java学习笔记_day20</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day20/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.257Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>方法定义中调用方法本身的现象</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：请用代码实现求5的阶乘。</div><div class="line"> * 下面的知识要知道：</div><div class="line"> * 		5! = 1*2*3*4*5</div><div class="line"> * 		5! = 5*4!</div><div class="line"> * </div><div class="line"> * 有几种方案实现呢?</div><div class="line"> * 		A:循环实现</div><div class="line"> * 		B:递归实现</div><div class="line"> * 			a:做递归要写一个方法</div><div class="line"> * 			b:出口条件</div><div class="line"> * 			c:规律</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiGuiDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> jc = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">2</span>; x &lt;= <span class="number">5</span>; x++) &#123;</div><div class="line">			jc *= x;</div><div class="line">		&#125;</div><div class="line">		System.out.println(<span class="string">"5的阶乘是："</span> + jc);</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"5的阶乘是："</span>+jieCheng(<span class="number">5</span>));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">/*</span></div><div class="line">	 * 做递归要写一个方法:</div><div class="line">	 * 		返回值类型：int</div><div class="line">	 * 		参数列表：int n</div><div class="line">	 * 出口条件:</div><div class="line">	 * 		if(n == 1) &#123;return 1;&#125;</div><div class="line">	 * 规律:</div><div class="line">	 * 		if(n != 1) &#123;return n*方法名(n-1);&#125;</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">jieCheng</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</div><div class="line">			<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		&#125;<span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> n*jieCheng(n-<span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="练习题重要"><a href="#练习题重要" class="headerlink" title="练习题重要"></a>练习题重要</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 有一对兔子，从出生后第3个月起每个月都生一对兔子，小兔子长到第三个月后每个月又生一对兔子，假如兔子都不死，问第二十个月的兔子对数为多少？</div><div class="line"> * 分析：我们要想办法找规律</div><div class="line"> * 			兔子对数</div><div class="line"> * 第一个月： 	1</div><div class="line"> * 第二个月：	1</div><div class="line"> * 第三个月：	2</div><div class="line"> * 第四个月：	3	</div><div class="line"> * 第五个月：	5</div><div class="line"> * 第六个月：	8</div><div class="line"> * ...</div><div class="line"> * </div><div class="line"> * 由此可见兔子对象的数据是：</div><div class="line"> * 		1,1,2,3,5,8...</div><div class="line"> * 规则：</div><div class="line"> * 		A:从第三项开始，每一项是前两项之和</div><div class="line"> * 		B:而且说明前两项是已知的</div><div class="line"> * </div><div class="line"> * 如何实现这个程序呢?</div><div class="line"> * 		A:数组实现</div><div class="line"> * 		B:变量的变化实现</div><div class="line"> * 		C:递归实现</div><div class="line"> * </div><div class="line"> * 假如相邻的两个月的兔子对数是a,b</div><div class="line"> * 第一个相邻的数据：a=1,b=1</div><div class="line"> * 第二个相邻的数据：a=1,b=2</div><div class="line"> * 第三个相邻的数据：a=2,b=3</div><div class="line"> * 第四个相邻的数据：a=3,b=5</div><div class="line"> * 看到了：下一次的a是以前的b，下一次是以前的a+b	</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiGuiDemo2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 定义一个数组</span></div><div class="line">		<span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">20</span>];</div><div class="line">		arr[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">		arr[<span class="number">1</span>] = <span class="number">1</span>;</div><div class="line">		<span class="comment">// arr[2] = arr[0] + arr[1];</span></div><div class="line">		<span class="comment">// arr[3] = arr[1] + arr[2];</span></div><div class="line">		<span class="comment">// ...</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">2</span>; x &lt; arr.length; x++) &#123;</div><div class="line">			arr[x] = arr[x - <span class="number">2</span>] + arr[x - <span class="number">1</span>];</div><div class="line">		&#125;</div><div class="line">		System.out.println(arr[<span class="number">19</span>]);<span class="comment">// 6765</span></div><div class="line">		System.out.println(<span class="string">"----------------"</span>);</div><div class="line"></div><div class="line">		<span class="keyword">int</span> a = <span class="number">1</span>;</div><div class="line">		<span class="keyword">int</span> b = <span class="number">1</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">18</span>; x++) &#123;</div><div class="line">			<span class="comment">// 临时变量存储上一次的a</span></div><div class="line">			<span class="keyword">int</span> temp = a;</div><div class="line">			a = b;</div><div class="line">			b = temp + b;</div><div class="line">		&#125;</div><div class="line">		System.out.println(b);</div><div class="line">		System.out.println(<span class="string">"----------------"</span>);</div><div class="line"></div><div class="line">		System.out.println(fib(<span class="number">20</span>));</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/*</span></div><div class="line">	 * 方法： 返回值类型：int 参数列表：int n 出口条件： 第一个月是1，第二个月是1 规律： 从第三个月开始，每一个月是前两个月之和</div><div class="line">	 */</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>递归要注意：出口条件和重复执行的规律。</p>
<p>递归是简单的算法：只要明白规律即可，比如上面的fib方法，就是阐述如果是第一个月或者第二个月就是1，其他月份是前两个月份的和。</p>
<h3 id="练习题二"><a href="#练习题二" class="headerlink" title="练习题二"></a>练习题二</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：请大家把E:\JavaSE目录下所有的java结尾的文件的绝对路径给输出在控制台。</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:封装目录</div><div class="line"> * 		B:获取该目录下所有的文件或者文件夹的File数组</div><div class="line"> * 		C:遍历该File数组，得到每一个File对象</div><div class="line"> * 		D:判断该File对象是否是文件夹</div><div class="line"> * 			是：回到B</div><div class="line"> * 			否：继续判断是否以.java结尾</div><div class="line"> * 				是：就输出该文件的绝对路径</div><div class="line"> * 				否：不搭理它</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilePathDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 封装目录</span></div><div class="line">		File srcFolder = <span class="keyword">new</span> File(<span class="string">"E:"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 递归功能实现</span></div><div class="line">		getAllJavaFilePaths(srcFolder);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAllJavaFilePaths</span><span class="params">(File srcFolder)</span> </span>&#123;</div><div class="line">		<span class="comment">// 获取该目录下所有的文件或者文件夹的File数组</span></div><div class="line">		File[] fileArray = srcFolder.listFiles();</div><div class="line"></div><div class="line">		<span class="comment">// 遍历该File数组，得到每一个File对象</span></div><div class="line">		<span class="keyword">for</span> (File file : fileArray) &#123;</div><div class="line">			<span class="comment">// 判断该File对象是否是文件夹</span></div><div class="line">			<span class="keyword">if</span> (file != <span class="keyword">null</span> &amp;&amp; file.isDirectory()) &#123;</div><div class="line">				getAllJavaFilePaths(file);</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				<span class="comment">// 继续判断是否以.java结尾</span></div><div class="line">				<span class="keyword">if</span> (file != <span class="keyword">null</span> &amp;&amp; file.getName().endsWith(<span class="string">".java"</span>)) &#123;</div><div class="line">					<span class="comment">// 就输出该文件的绝对路径</span></div><div class="line">					System.out.println(file.getAbsolutePath());</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="案例三"><a href="#案例三" class="headerlink" title="案例三"></a>案例三</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：递归删除带内容的目录</div><div class="line"> * </div><div class="line"> * 目录我已经给定：demo</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:封装目录</div><div class="line"> * 		B:获取该目录下的所有文件或者文件夹的File数组</div><div class="line"> * 		C:遍历该File数组，得到每一个File对象</div><div class="line"> * 		D:判断该File对象是否是文件夹</div><div class="line"> * 			是：回到B</div><div class="line"> * 			否：就删除</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDeleteDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 封装目录</span></div><div class="line">		File srcFolder = <span class="keyword">new</span> File(<span class="string">"demo"</span>);</div><div class="line">		<span class="comment">// 递归实现</span></div><div class="line">		deleteFolder(srcFolder);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteFolder</span><span class="params">(File srcFolder)</span> </span>&#123;</div><div class="line">		<span class="comment">// 获取该目录下的所有文件或者文件夹的File数组</span></div><div class="line">		File[] fileArray = srcFolder.listFiles();</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (fileArray != <span class="keyword">null</span>) &#123;</div><div class="line">			<span class="comment">// 遍历该File数组，得到每一个File对象</span></div><div class="line">			<span class="keyword">for</span> (File file : fileArray) &#123;</div><div class="line">				<span class="comment">// 判断该File对象是否是文件夹</span></div><div class="line">				<span class="keyword">if</span> (file.isDirectory()) &#123;</div><div class="line">					deleteFolder(file);</div><div class="line">				&#125; <span class="keyword">else</span> &#123;</div><div class="line">					System.out.println(file.getName() + <span class="string">"---"</span> + file.delete());</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			System.out.println(srcFolder.getName() + <span class="string">"---"</span> + srcFolder.delete());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h2><p>lO流用来处理设备之间的数据传输，Java用于操作流的对象都在IO包中，输入输出以程序为本身参考物，所以输入流用来读数据，输出流用来写数据</p>
<p>一个字符两个字节，是为了方便操作文本数据，如果使用windows的记事本可以打开并且看懂，那么就是用字符流，如果什么都不知道就是用字节流</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li><p>流向：</p>
<p>输入流    读取数据<br>输出流 写出数据</p>
</li>
<li><p>数据类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">字节流</div><div class="line">	字节输入流	读取数据	InputStream</div><div class="line">	字节输出流	写出数据	OutputStream</div><div class="line">字符流</div><div class="line">	字符输入流	读取数据	Reader</div><div class="line">	字符输出流	写出数据	Writer</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>默认情况下是按照数据类型来分的</p>
</blockquote>
<h3 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h3><h4 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">FileOutputStream(File file) </div><div class="line"></div><div class="line">FileOutputStream(String name)</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建字节输出流对象</span></div><div class="line"><span class="comment">// FileOutputStream(File file)</span></div><div class="line"><span class="comment">// File file = new File("fos.txt");</span></div><div class="line"><span class="comment">// FileOutputStream fos = new FileOutputStream(file);</span></div><div class="line"><span class="comment">// FileOutputStream(String name)和下面的代码含义相同</span></div><div class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"fos.txt"</span>);</div></pre></td></tr></table></figure>
<p>在创建字节流后台过程：</p>
<ol>
<li>首先是创建文件</li>
<li>然后是创建File对象</li>
<li>把File对象指向文件</li>
</ol>
<blockquote>
<p>把字符串转化成字节”hello,IO”.getBytes()</p>
</blockquote>
<p>####成员方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> b)</span>:写一个字节</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span>[] b)</span>:写一个字节数组</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span>[] b,<span class="keyword">int</span> off,<span class="keyword">int</span> len)</span>:写一个字节数组的一部分</div></pre></td></tr></table></figure>
<h4 id="换行问题"><a href="#换行问题" class="headerlink" title="换行问题"></a>换行问题</h4><p>windows是\r\n，FileOutputStream.write(“\r\n”.getBytes());</p>
<h4 id="数据追加问题"><a href="#数据追加问题" class="headerlink" title="数据追加问题"></a>数据追加问题</h4><p>在新建FileOutputStream对象时，第二个参数添加true即可</p>
<h4 id="加入异常处理的FileOutputStream示例代码"><a href="#加入异常处理的FileOutputStream示例代码" class="headerlink" title="加入异常处理的FileOutputStream示例代码"></a>加入异常处理的FileOutputStream示例代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 为了在finally里面能够看到该对象就必须定义到外面，为了访问不出问题，还必须给初始化值</span></div><div class="line">FileOutputStream fos = <span class="keyword">null</span>;</div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">	<span class="comment">// fos = new FileOutputStream("z:\\fos4.txt");</span></div><div class="line">	fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"fos4.txt"</span>);</div><div class="line">	fos.write(<span class="string">"java"</span>.getBytes());</div><div class="line">&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</div><div class="line">	e.printStackTrace();</div><div class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">	e.printStackTrace();</div><div class="line">&#125; <span class="keyword">finally</span> &#123;</div><div class="line">	<span class="comment">// 如果fos不是null，才需要close()</span></div><div class="line">	<span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="comment">// 为了保证close()一定会执行，就放到这里了</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			fos.close();</div><div class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：close方法是在finaly中调用的而且加入了判断是否为空的操作</p>
<h3 id="FileInputStream"><a href="#FileInputStream" class="headerlink" title="FileInputStream"></a>FileInputStream</h3><p>读取示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//读取带有中文字符的格式</span></div><div class="line"><span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((len = fis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">	System.out.print(<span class="keyword">new</span> String(bys, <span class="number">0</span>, len));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//直接用字节流来操作</span></div><div class="line"><span class="comment">// 封装数据源</span></div><div class="line">FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"e:\\林青霞.jpg"</span>);</div><div class="line"><span class="comment">// 封装目的地</span></div><div class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"mn.jpg"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 复制数据</span></div><div class="line"><span class="keyword">int</span> by = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((by = fis.read()) != -<span class="number">1</span>) &#123;</div><div class="line">	fos.write(by);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上有两种读取数据的方法：</p>
<blockquote>
<p>int read():一次读取一个字节</p>
<p>int read(byte[] b):一次读取一个字节数组,in返回值是实际读取字符的个数</p>
</blockquote>
<p>调用read（bytes[] b) 最后一次调用时假如没有读取完整个数组那么，最后一次会把前一次的n个字符替代，后面的字符n-b还会显示，用第二个方法int read(byte[] b)读取数组会快</p>
<h3 id="缓冲区类-高效类"><a href="#缓冲区类-高效类" class="headerlink" title="缓冲区类(高效类)"></a>缓冲区类(高效类)</h3><p>写数据：BufferedOutputStream，读数据：BufferedInputStream</p>
<p>构造方法可以指定缓冲区的大小，但是我们一般用不上，因为默认缓冲区大小就足够了</p>
<h4 id="为什么不传递一个具体的文件或者文件路径，而是传递一个OutputStream对象呢"><a href="#为什么不传递一个具体的文件或者文件路径，而是传递一个OutputStream对象呢" class="headerlink" title="为什么不传递一个具体的文件或者文件路径，而是传递一个OutputStream对象呢?"></a>为什么不传递一个具体的文件或者文件路径，而是传递一个OutputStream对象呢?</h4><p>字节缓冲区流仅仅提供缓冲区，为高效而设计的。但是呢，真正的读写操作还得靠基本的流对象实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// FileOutputStream fos = new FileOutputStream("bos.txt");</span></div><div class="line"><span class="comment">// BufferedOutputStream bos = new BufferedOutputStream(fos);</span></div><div class="line"><span class="comment">// 简单写法</span></div><div class="line">BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(</div><div class="line">		<span class="keyword">new</span> FileOutputStream(<span class="string">"bos.txt"</span>));</div><div class="line"></div><div class="line"><span class="comment">// 写数据</span></div><div class="line">bos.write(<span class="string">"hello"</span>.getBytes());</div><div class="line"></div><div class="line"><span class="comment">// 释放资源</span></div><div class="line">bos.close();</div></pre></td></tr></table></figure>
<p>带缓冲的字节读取流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"bos.txt"</span>));</div><div class="line"></div><div class="line"><span class="comment">// 读取数据</span></div><div class="line"><span class="comment">// int by = 0;</span></div><div class="line"><span class="comment">// while ((by = bis.read()) != -1) &#123;</span></div><div class="line"><span class="comment">// System.out.print((char) by);</span></div><div class="line"><span class="comment">// &#125;</span></div><div class="line"><span class="comment">// System.out.println("---------");</span></div><div class="line"></div><div class="line"><span class="comment">// 第二中方式读取数据</span></div><div class="line"><span class="keyword">byte</span>[] bys = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line"><span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> ((len = bis.read(bys)) != -<span class="number">1</span>) &#123;</div><div class="line">	System.out.print(<span class="keyword">new</span> String(bys, <span class="number">0</span>, len));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 释放资源</span></div><div class="line">bis.close();</div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day20/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day2/"><span>Java学习笔记_day2</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day2/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.195Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><p>组成关键字的字母全部小写</p>
<p>goto和const作为保留字存在,目前并不使用</p>
<h3 id="常见关键字"><a href="#常见关键字" class="headerlink" title="常见关键字"></a>常见关键字</h3><p><img src="E:\picture\snipaste_20170313_204018.png" alt="snipaste_20170313_204018"></p>
<p><img src="E:\picture\snipaste_20170313_204039.png" alt="snipaste_20170313_204039"></p>
<h2 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h2><p>就是给类,接口,方法,变量variable等起名字时使用的字符序列</p>
<h3 id="组成规则"><a href="#组成规则" class="headerlink" title="组成规则"></a>组成规则</h3><p>l  英文大小写字母</p>
<p>l  数字字符</p>
<p>l  $和_</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>l  不能以数字开头</p>
<p>l  不能是Java中的关键字</p>
<p>l  区分大小写</p>
<h3 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h3><ol>
<li>包(其实就是文件夹,用于解决相同类名问题)</li>
</ol>
<p>全部是小写</p>
<p>单级包：haotianyi</p>
<p>多级包：cn.hty</p>
<ol>
<li>类或者接口</li>
</ol>
<p>一个单词：首字母大写</p>
<p>多个单词：每个大单词首字母大写     ShowAllAge</p>
<ol>
<li>方法和变量</li>
</ol>
<p>一个单词:单词的首字母小写  age</p>
<p>多个单词：从第二个单词开始，单词的首字母大写   showAllAge</p>
<ol>
<li>常量</li>
</ol>
<p>一个单词：每个字母全部大写</p>
<p>多个单词：每个字母全部大写，单词之间用下划线隔开</p>
<h2 id="Java中注释"><a href="#Java中注释" class="headerlink" title="Java中注释"></a>Java中注释</h2><p>l  单行注释</p>
<p>格式： //注释文字</p>
<p>l  多行注释</p>
<p>格式： /<em>  注释文字  </em>/</p>
<p>l  文档注释</p>
<p>格式：/<em>* 注释文字 </em>/</p>
<p>多行注释不可以嵌套使用，单行才可以嵌套使用</p>
<p>文档注释主要是被javadoc工具解析成一个说明书</p>
<p>先写注释在写代码</p>
<h3 id="注释的作用"><a href="#注释的作用" class="headerlink" title="注释的作用"></a>注释的作用</h3><p>解释说明程序，提高程序的阅读性</p>
<p>可以帮助我们排错</p>
<h2 id="常量constant"><a href="#常量constant" class="headerlink" title="常量constant"></a>常量constant</h2><p>在程序执行的过程中其值不可以发生改变</p>
<h3 id="Java中常量分类"><a href="#Java中常量分类" class="headerlink" title="Java中常量分类"></a>Java中常量分类</h3><ol>
<li>字面值常量</li>
</ol>
<p>字符串常量  用双引号括起来的内容</p>
<p>整数常量       所有整数</p>
<p>12,23</p>
<p>小数常量       所有小数</p>
<p>12.34,56.78</p>
<p>字符常量       用单引号括起来的内容</p>
<p>‘a’,’A’,’0’</p>
<p>布尔常量       较为特有，只有true和false</p>
<p>空常量      null(数组部分讲解)</p>
<ol>
<li>自定义常量</li>
</ol>
<h3 id="不同进制的数据组成"><a href="#不同进制的数据组成" class="headerlink" title="不同进制的数据组成"></a>不同进制的数据组成</h3><p>二进制  </p>
<p>由0,1组成。以0b开头</p>
<p>八进制  </p>
<p>由0,1,…7组成。以0开头</p>
<p>十进制  </p>
<p>由0,1,…9组成。整数默认是十进制的</p>
<p>十六进制    </p>
<p>由0,1,…9,a,b,c,d,e,f(大小写均可)。以0x开头 </p>
<h4 id="不同进制之间的转换"><a href="#不同进制之间的转换" class="headerlink" title="不同进制之间的转换"></a>不同进制之间的转换</h4><p>l  十进制到其他进制</p>
<p>用原始数据除以要转换的进制数，直到被除数是0为止，然后从下到上得到余数</p>
<p>l  其他进制到十进制</p>
<p>用每位的数字在乘以进制的不同次幂</p>
<h4 id="由符号数据表示法"><a href="#由符号数据表示法" class="headerlink" title="由符号数据表示法"></a>由符号数据表示法</h4><p>在计算机内，有符号数有3种表示法：原码、反码和补码。所有数据的运算都是采用补码进行的。</p>
<p>原码</p>
<p>就是二进制定点表示法，即最高位为符号位，“0”表示正，“1”表示负，其余位表示数值的大小。</p>
<p>反码</p>
<p>正数的反码与其原码相同；负数的反码是对其原码逐位取反，但符号位除外。</p>
<p>补码</p>
<p>正数的补码与其原码相同；负数的补码是在其反码的末位加1。</p>
<h2 id="变量variable"><a href="#变量variable" class="headerlink" title="变量variable"></a>变量variable</h2><p>在程序执行的过程中，在某个范围内其值可以发生改变的量</p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p><img src="E:\picture\snipaste_20170313_204211.png" alt="snipaste_20170313_204211"></p>
<p>Java语言是强类型语言，对于每一种数据都定义了明确的具体数据类型，在内存总分配了不同大小的内存空间</p>
<h3 id="数据的范围"><a href="#数据的范围" class="headerlink" title="数据的范围"></a>数据的范围</h3><p><img src="E:\picture\snipaste_20170313_204232.png" alt="snipaste_20170313_204232"></p>
<h3 id="数据注意"><a href="#数据注意" class="headerlink" title="数据注意"></a>数据注意</h3><p>一个字节8个比特</p>
<p>整数默认：int   浮点数默认：double</p>
<p>如要声明一个常量为 float 型，则需在数字后面加 f 或 F</p>
<p>声明long型常量可以后加‘ l ’或‘ L ’</p>
<h3 id="变量注意事项"><a href="#变量注意事项" class="headerlink" title="变量注意事项"></a>变量注意事项</h3><p>作用域  </p>
<p>变量定义在哪一级大括号中，哪个大括号的范围就是这个变量的作用域。相同的作用域中不能定义两个同名变量。</p>
<p>初始化值</p>
<p>没有初始化值不能直接使用</p>
<p>在一行上建议只定义一个变量</p>
<p>可以定义多个，但是不建议</p>
<h2 id="数据类型的转换"><a href="#数据类型的转换" class="headerlink" title="数据类型的转换"></a>数据类型的转换</h2><p>l  默认转换</p>
<p>byte,short,char—int—long</p>
<p>byte,short,char相互之间转换，他们参与运算首先转换为int类型</p>
<p>l  强制转换</p>
<p>目标类型 变量名=(目标类型)(被转换的数据);</p>
<p>byte，short在定义的时候，他们接收的其实是一个int类型的值。</p>
<p>这个是自己做了一个数据检测的，如果不再它们的范围内，就报错。</p>
<h2 id="思考题"><a href="#思考题" class="headerlink" title="思考题"></a>思考题</h2><ol>
<li><p>byte b =130;有没有问题?如果我想让赋值正确，可以怎么做?结果是多少呢?</p>
</li>
<li><p>字符参与运算</p>
<pre><code>是查找ASCII里面的值

&apos;a&apos;    97

&apos;A&apos;    65

&apos;0&apos;    48
</code></pre></li>
<li><p>下面两种方式有区别吗?</p>
<pre><code>float f1 = 12.345f;

float f2 = (float)12.345;
</code></pre></li>
</ol>
<p>下面的程序有问题吗，如果有，在哪里呢?</p>
<pre><code>byte b1 = 3;

byte b2 = 4;

byte b3 = b1 + b2;

byte b4 = 3 + 4;
</code></pre><p>参考：</p>
<p>1用原码反码补码来计算</p>
<pre><code>我们要想知道结果是什么，就应该知道是如何进行计算的。

而我们又知道计算机中数据的运算都是补码进行的。

而要得到补码，首先要计算出数据的二进制。



A:获取130这个数据的二进制。

    00000000 0000000000000000 10000010

    这是130的原码，也是反码，还是补码。

B:做截取操作，截成byte类型的了。

    10000010 

    这个结果是补码。

C:已知补码求原码。

           符号位     数值位

    补码：  1          0000010



    反码：  1          0000001



    原码：  1          1111110
</code></pre><p>2是f1就是float类型的数据但是f2是int去掉前面三个字节截取而得</p>
<p>3两个byte类型的数据相加直接转换成int类型，由低级向高级装换可以隐士转换，高级向低级转换一定要显示，是b3错误，换成short一样错误。</p>
<p>常量，先把结果计算出来，然后看是否在byte的范围内，如果在就不报错。</p>
<h2 id="复习题"><a href="#复习题" class="headerlink" title="复习题"></a>复习题</h2><p>1:在定义Long或者Float类型变量的时候，要加L或者f。</p>
<p> 整数默认是int类型，浮点数默认是double。</p>
<p> byte，short在定义的时候，他们接收的其实是一个int类型的值。</p>
<p> 这个是自己做了一个数据检测的，如果不再它们的范围内，就报错。</p>
<p>2:byte值的问题</p>
<pre><code>byteb1 = 127;

byteb2 = (byte)128; //-128

byteb3 = (byte)129; //-127

byteb4 = (byte)130; //-126



byte的范围：-128 ~ 127



128：10000000

-128：10000000 (这里的1即是符号位，也是数值位)
</code></pre><p>3:数据类型转换之默认转换</p>
<pre><code>byte,short,char-- int -- long -- float -- double



long:8个字节

float：4个字节



A:它们底层的存储结构不同。

B:float表示的数据范围比long的范围要大

   long：2^63-1

   float：3.4*10^38 &gt; 2*10^38 &gt; 2*8^38 =2*2^3^38 = 2*2^114 &gt; 2^63-1
</code></pre><p>4:Java语言中的字符char可以存储一个中文汉字吗?为什么呢?</p>
<pre><code>可以。因为java语言中的字符占用两个字节。



Java语言采用的是Unicode编码。
</code></pre>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day2/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day19/"><span>Java学习笔记_day19</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day19/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.085Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><h2 id="程序异常Throwable"><a href="#程序异常Throwable" class="headerlink" title="程序异常Throwable"></a>程序异常Throwable</h2><p> <img src="E:\picture\ice_screenshot_20160808-144005.png" alt="ice_screenshot_20160808-144005"></p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ol>
<li>error严重问题，一般不处理，如内存溢出</li>
<li>exception问题</li>
</ol>
<h3 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h3><p>包括RuntimeException（运行期间问题）及其子类和非RuntimeException子类（编译期间问题）</p>
<p>RuntimeException（运行期问题）：需要修改代码</p>
<p>非RuntimeException（编译器异常）：必须进行处理</p>
<h3 id="自己如何处理异常"><a href="#自己如何处理异常" class="headerlink" title="自己如何处理异常"></a>自己如何处理异常</h3><ul>
<li>try…catch…finally</li>
<li><p>throws 抛出</p>
<p>try…catch…finally的处理格式：</p>
<pre><code>try {

    可能出现问题的代码;
}catch(异常名 变量) {
    针对问题的处理;
}finally {
    释放资源;
}
</code></pre><p>变形格式：</p>
<pre><code>try {
    可能出现问题的代码;
}catch(异常名 变量) {
    针对问题的处理;
}
</code></pre><p><strong>注意</strong>：</p>
<pre><code>A:try里面的代码越少越好
B:catch里面必须有内容，哪怕是给出一个简单的提示
</code></pre></li>
</ul>
<p>在catch中捕获异常时注意：由于异常也有继承关系所以假如有多个异常，那么要注意父异常写在最下面。</p>
<h4 id="JDK7新特性"><a href="#JDK7新特性" class="headerlink" title="JDK7新特性"></a>JDK7新特性</h4><p>  JDK7出现了一个新的异常处理方案：<br>          try{</p>
<pre><code>}catch(异常名1 | 异常名2 | ...  变量 ) {
    ...
}

注意：这个方法虽然简洁，但是也不够好。
    A:处理方式是一致的。(实际开发中，好多时候可能就是针对同类型的问题，给出同一个处理)
   B:多个异常间必须是平级关系。
</code></pre><h3 id="编译时期和运行时期的异常"><a href="#编译时期和运行时期的异常" class="headerlink" title="编译时期和运行时期的异常"></a>编译时期和运行时期的异常</h3><p>编译期异常：Java程序必须显示处理，否则程序就会发生错误，无法通过编译</p>
<p>运行期异常：无需显示处理，也可以和编译时异常一样处理</p>
<h3 id="异常对象"><a href="#异常对象" class="headerlink" title="异常对象"></a>异常对象</h3><p>在try里面发现问题后，jvm会帮我们生成一个异常对象，然后把这个对象抛出，和catch里面的类进行匹配，如果该对象是某个类型的，就会执行该catch里面的处理信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		String s = <span class="string">"2014-11-20"</span>;</div><div class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			Date d = sdf.parse(s); <span class="comment">// 创建了一个ParseException对象，然后抛出去，和catch里面进行匹配</span></div><div class="line">			System.out.println(d);</div><div class="line">		&#125; <span class="keyword">catch</span> (ParseException e) &#123; <span class="comment">// ParseException e = new ParseException();</span></div><div class="line">			<span class="comment">// ParseException</span></div><div class="line">			<span class="comment">// e.printStackTrace();</span></div><div class="line"></div><div class="line">			<span class="comment">// getMessage()</span></div><div class="line">			<span class="comment">// System.out.println(e.getMessage());</span></div><div class="line">			<span class="comment">// Unparseable date: "2014-11-20"</span></div><div class="line"></div><div class="line">			<span class="comment">// toString()</span></div><div class="line">			<span class="comment">// System.out.println(e.toString());</span></div><div class="line">			<span class="comment">// java.text.ParseException: Unparseable date: "2014-11-20"</span></div><div class="line">			</div><div class="line">			e.printStackTrace();</div><div class="line">			<span class="comment">//跳转到某个指定的页面(index.html)</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"over"</span>);</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h4 id="异常对象的方法"><a href="#异常对象的方法" class="headerlink" title="异常对象的方法"></a>异常对象的方法</h4><ul>
<li>public String getMessage():异常的消息字符串</li>
<li>public String toString():返回异常的简单信息描述</li>
</ul>
<blockquote>
<p>组成规则：此对象的类的 name(全路径名)”: “（冒号和一个空格）调用此对象 getLocalizedMessage()方法的结果 (默认返回的是getMessage()的内容)</p>
</blockquote>
<ul>
<li>printStackTrace() 获取异常类名和异常信息，以及异常出现在程序中的位置。返回值void。把信息输出在控制台，和jvm的默认处理不同，在异常后面的语句它也可以执行，如打印over</li>
</ul>
<h4 id="异常抛出的另两种格式"><a href="#异常抛出的另两种格式" class="headerlink" title="异常抛出的另两种格式"></a>异常抛出的另两种格式</h4><ul>
<li>早方法声明上throws异常，尽量不要在main方法上抛出异常，throws后面可以1和多个异常，逗号隔开</li>
<li><p>用throw抛出异常对象，throw new ArithmeticException();</p>
<p>####throws和throw的区别</p>
<p>throws</p>
<pre><code>用在方法声明后面，跟的是异常类名
可以跟多个异常类名，用逗号隔开
表示抛出异常，由该方法的调用者来处理
throws表示出现异常的一种可能性，并不一定会发生这些异常
</code></pre><p>throw</p>
<pre><code>用在方法体内，跟的是异常对象名
只能抛出一个异常对象名
表示抛出异常，由方法体内的语句处理
throw则是抛出了异常，执行throw则一定抛出了某种异常
</code></pre><p><strong>如果该功能内部可以将问题处理,用try,如果处理不了,交由调用者处理,这是用throws</strong></p>
</li>
</ul>
<blockquote>
<p>区别:后续程序需要继续运行就try，后续程序不需要继续运行就throws</p>
<p>try…catch…finally…被finally控制的语句体一定会执行（除了jvm退出，System.exit(0))</p>
</blockquote>
<h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><ul>
<li>final,finally和finalize的区别</li>
<li>如果catch里面有return语句，请问finally里面的代码还会执行吗?</li>
<li>try…catch…finally的格式变形</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 面试题：</div><div class="line"> * 1:final,finally和finalize的区别</div><div class="line"> * final：最终的意思，可以修饰类，成员变量，成员方法</div><div class="line"> * 		修饰类，类不能被继承</div><div class="line"> * 		修饰变量，变量是常量</div><div class="line"> * 		修饰方法，方法不能被重写</div><div class="line"> * finally：是异常处理的一部分，用于释放资源。</div><div class="line"> * 		一般来说，代码肯定会执行，特殊情况：在执行到finally之前jvm退出了</div><div class="line"> * finalize：是Object类的一个方法，用于垃圾回收</div><div class="line"> * </div><div class="line"> * 2:如果catch里面有return语句，请问finally里面的代码还会执行吗?</div><div class="line"> *   如果会，请问是在return前，还是return后。</div><div class="line"> * 	   会。前。</div><div class="line"> * </div><div class="line"> * 	 准确的说，应该是在中间。</div><div class="line"> * </div><div class="line"> * 3:try...catch...finally的格式变形</div><div class="line"> * 		A:try...catch...finally</div><div class="line"> * 		B:try...catch</div><div class="line"> * 		C:try...catch...catch...</div><div class="line"> * 		D:try...catch...catch...finally</div><div class="line"> * 		E:try...finally</div><div class="line"> * 			这种做法的目前是为了释放资源。</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinallyDemo2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		System.out.println(getInt());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getInt</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> a = <span class="number">10</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			System.out.println(a / <span class="number">0</span>);</div><div class="line">			a = <span class="number">20</span>;</div><div class="line">		&#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</div><div class="line">			a = <span class="number">30</span>;</div><div class="line">			<span class="keyword">return</span> a;</div><div class="line">			<span class="comment">/*</span></div><div class="line">			 * return a在程序执行到这一步的时候，这里不是return a而是return 30;这个返回路径就形成了。</div><div class="line">			 * 但是呢，它发现后面还有finally，所以继续执行finally的内容，a=40</div><div class="line">			 * 再次回到以前的返回路径，继续走return 30;</div><div class="line">			 */</div><div class="line">		&#125; <span class="keyword">finally</span> &#123;</div><div class="line">			a = <span class="number">40</span>;</div><div class="line">			<span class="comment">//return a;//如果这样结果就是40了。</span></div><div class="line">		&#125;</div><div class="line">		 <span class="keyword">return</span> a; 		<span class="comment">//结果是</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h3><p>必须继承自Exception或者RuntimeException</p>
<blockquote>
<p>如果是继承自RuntimeException那么在throw  new  异常时在方法上就不用再throws抛出，但是假如自定义的异常继承自Exception，也就是编译时期的异常那么就一定要早方法上抛出异常</p>
</blockquote>
<p>我们在抛出异常时自定义了一个字符串：throw new MyException(“分数必须在0-100之间”);但是在抛出没有反应，此时只要在带参构造方法中添加super(message)，就可以反应在控制台，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cn.itcast_08.MyException: 分数必须在<span class="number">0</span>-<span class="number">100</span>之间</div><div class="line">	at cn.itcast_08.Teacher.check(Teacher.java:<span class="number">6</span>)</div><div class="line">	at cn.itcast_08.StudentDemo.main(StudentDemo.java:<span class="number">16</span>)</div></pre></td></tr></table></figure>
<p>自定义异常继承自Exception就是编译时期异常，继承自RuntimeException就是运行时期异常</p>
<p>自定义异常只要重写两个构造方法就行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">()</span> </span>&#123;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String string)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>(string);		<span class="comment">//一定要super可以反应字符串</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>子类和父类都要抛出异常，而且子类重写父类的异常方法，那么子类抛出的异常一定是父类异常的子类或者就是父类异常。</p>
<p>如果父类抛出了多个异常,子类重写父类时,只能抛出相同的异常或者是他的子集,子类不能抛出父类没有的异常</p>
<p>如果被重写的方法没有异常抛出,那么子类的方法绝对不可以抛出异常,如果子类方法内有异常发生,那么子类只能try,不能throws</p>
<h2 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h2><p>实现了Comparable接口（自然排序），文件和目录路径名的抽象表示形式，未必是真实存在的。</p>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><p>File(String pathname)：根据一个路径得到File对象</p>
<p>File(String parent, String child):根据一个目录和一个子文件/目录得到File对象</p>
<p>File(File parent, String child):根据一个父File对象和一个子文件/目录得到File对象</p>
<p>注意此时盘符路径的斜杠问题（两个斜杠）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">		<span class="comment">// File(String pathname)：根据一个路径得到File对象</span></div><div class="line">		<span class="comment">// 把e:\\demo\\a.txt封装成一个File对象</span></div><div class="line">		File file = <span class="keyword">new</span> File(<span class="string">"E:\\demo\\a.txt"</span>);</div><div class="line"></div><div class="line"><span class="comment">// File(String parent, String child):根据一个目录和一个子文件/目录得到File对象</span></div><div class="line">		File file2 = <span class="keyword">new</span> File(<span class="string">"E:\\demo"</span>, <span class="string">"a.txt"</span>);</div><div class="line"></div><div class="line"><span class="comment">// File(File parent, String child):根据一个父File对象和一个子文件/目录得到File对象</span></div><div class="line">		File file3 = <span class="keyword">new</span> File(<span class="string">"e:\\demo"</span>);</div><div class="line">		File file4 = <span class="keyword">new</span> File(file3, <span class="string">"a.txt"</span>);</div></pre></td></tr></table></figure>
<p><strong>盘符大小写无关</strong></p>
<h3 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h3><h4 id="创建功能"><a href="#创建功能" class="headerlink" title="创建功能"></a>创建功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">createNewFile</span><span class="params">()</span>:创建文件 如果存在这样的文件，就不创建了</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">mkdir</span><span class="params">()</span>:创建文件夹 如果存在这样的文件夹，就不创建了</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">mkdirs</span><span class="params">()</span>:创建多级文件夹,如果父文件夹不存在，会帮你创建出来</div></pre></td></tr></table></figure>
<p>要想在某个目录下创建内容，该目录首先必须存在，就是先调用mkdir()或者mkdirs()方法而不是直接调用createNewFile()方法，否则会报异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Exception in thread <span class="string">"main"</span> java.io.IOException: 系统找不到指定的路径。</div></pre></td></tr></table></figure>
<blockquote>
<p>mkdir()不能创建多级目录</p>
<p>如果你创建文件或者文件夹忘了写盘符路径，那么，默认在项目根路径下。</p>
</blockquote>
<h4 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">()</span></span></div></pre></td></tr></table></figure>
<p>java删除的文件或者文件夹不回收到垃圾箱</p>
<blockquote>
<p>如果你删除文件或者文件夹忘了写盘符路径，那么，默认在项目根路径下</p>
<p>删除文件夹那么这个问价夹必须是空的</p>
</blockquote>
<h4 id="重命名功能"><a href="#重命名功能" class="headerlink" title="重命名功能"></a>重命名功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">renameTo</span><span class="params">(File dest)</span></span></div></pre></td></tr></table></figure>
<blockquote>
<p>如果路径名相同，就是改名，如果路径名不同，就是改名并剪切。</p>
</blockquote>
<p>路径以盘符开始：绝对路径    c:\a.txt，路径不以盘符开始：相对路径    a.txt</p>
<h4 id="判断功能"><a href="#判断功能" class="headerlink" title="判断功能"></a>判断功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDirectory</span><span class="params">()</span>:判断是否是目录</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFile</span><span class="params">()</span>:判断是否是文件</div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exists</span><span class="params">()</span>:判断是否存在</div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canRead</span><span class="params">()</span>:判断是否可读</div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">canWrite</span><span class="params">()</span>:判断是否可写</div><div class="line"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHidden</span><span class="params">()</span>:判断是否隐藏</div></pre></td></tr></table></figure>
<h4 id="获取功能"><a href="#获取功能" class="headerlink" title="获取功能"></a>获取功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getAbsolutePath</span><span class="params">()</span>：获取绝对路径</span></div><div class="line"><span class="keyword">public</span> String <span class="title">getPath</span><span class="params">()</span>:获取相对路径</div><div class="line"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span>:获取名称</div><div class="line"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">length</span><span class="params">()</span>:获取长度。字节数</div><div class="line"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">lastModified</span><span class="params">()</span>:获取最后一次的修改时间，毫秒值</div><div class="line">  </div><div class="line"><span class="keyword">public</span> String[] <span class="title">list</span><span class="params">()</span>:获取指定目录下的所有文件或者文件夹的名称数组</div><div class="line"><span class="keyword">public</span> File[] <span class="title">listFiles</span><span class="params">()</span>:获取指定目录下的所有文件或者文件夹的File数组</div></pre></td></tr></table></figure>
<h3 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h3><p>判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出此文件名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出此文件名称</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:封装e判断目录</div><div class="line"> * 		B:获取该目录下所有文件或者文件夹的File数组</div><div class="line"> * 		C:遍历该File数组，得到每一个File对象，然后判断</div><div class="line"> * 		D:是否是文件</div><div class="line"> * 			是：继续判断是否以.jpg结尾</div><div class="line"> * 				是：就输出该文件名称</div><div class="line"> * 				否：不搭理它</div><div class="line"> * 			否：不搭理它</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 封装e判断目录</span></div><div class="line">		File file = <span class="keyword">new</span> File(<span class="string">"e:\\"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 获取该目录下所有文件或者文件夹的File数组</span></div><div class="line">		File[] fileArray = file.listFiles();</div><div class="line"></div><div class="line">		<span class="comment">// 遍历该File数组，得到每一个File对象，然后判断</span></div><div class="line">		<span class="keyword">for</span> (File f : fileArray) &#123;</div><div class="line">			<span class="comment">// 是否是文件</span></div><div class="line">			<span class="keyword">if</span> (f.isFile()) &#123;</div><div class="line">				<span class="comment">// 继续判断是否以.jpg结尾</span></div><div class="line">				<span class="keyword">if</span> (f.getName().endsWith(<span class="string">".jpg"</span>)) &#123;</div><div class="line">					<span class="comment">// 就输出该文件名称</span></div><div class="line">					System.out.println(f.getName());</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>另一种思路：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 判断E盘目录下是否有后缀名为.jpg的文件，如果有，就输出此文件名称</div><div class="line"> * A:先获取所有的，然后遍历的时候，依次判断，如果满足条件就输出。</div><div class="line"> * B:获取的时候就已经是满足条件的了，然后输出即可。</div><div class="line"> * </div><div class="line"> * 要想实现这个效果，就必须学习一个接口：文件名称过滤器</div><div class="line"> * public String[] list(FilenameFilter filter)</div><div class="line"> * public File[] listFiles(FilenameFilter filter)</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDemo2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 封装e判断目录</span></div><div class="line">		File file = <span class="keyword">new</span> File(<span class="string">"e:\\"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 获取该目录下所有文件或者文件夹的String数组</span></div><div class="line">		<span class="comment">// public String[] list(FilenameFilter filter)</span></div><div class="line">		String[] strArray = file.list(<span class="keyword">new</span> FilenameFilter() &#123;</div><div class="line">			<span class="meta">@Override</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</div><div class="line">				<span class="keyword">return</span> <span class="keyword">new</span> File(dir, name).isFile() &amp;&amp; name.endsWith(<span class="string">".jpg"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line"></div><div class="line">		<span class="comment">// 遍历</span></div><div class="line">		<span class="keyword">for</span> (String s : strArray) &#123;</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>文件名称过滤器:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String[] list(FilenameFilter filter)</div><div class="line"></div><div class="line"><span class="keyword">public</span> File[] listFiles(FilenameFilter filter)</div></pre></td></tr></table></figure>
<h3 id="练习题批量改名"><a href="#练习题批量改名" class="headerlink" title="练习题批量改名"></a>练习题批量改名</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求：把E:\评书\三国演义下面的视频名称修改为</div><div class="line"> * 		00?_介绍.avi</div><div class="line"> * </div><div class="line"> * 思路：</div><div class="line"> * 		A:封装目录</div><div class="line"> * 		B:获取该目录下所有的文件的File数组</div><div class="line"> * 		C:遍历该File数组，得到每一个File对象</div><div class="line"> * 		D:拼接一个新的名称，然后重命名即可。</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 封装目录</span></div><div class="line">		File srcFolder = <span class="keyword">new</span> File(<span class="string">"E:\\评书\\三国演义"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 获取该目录下所有的文件的File数组</span></div><div class="line">		File[] fileArray = srcFolder.listFiles();</div><div class="line"></div><div class="line">		<span class="comment">// 遍历该File数组，得到每一个File对象</span></div><div class="line">		<span class="keyword">for</span> (File file : fileArray) &#123;</div><div class="line">			<span class="comment">// System.out.println(file);</span></div><div class="line">			<span class="comment">// E:\评书\三国演义\三国演义_001_[评书网-今天很高兴,明天就IO了]_桃园三结义.avi</span></div><div class="line">			<span class="comment">// 改后：E:\评书\三国演义\001_桃园三结义.avi</span></div><div class="line">			String name = file.getName(); <span class="comment">// 三国演义_001_[评书网-今天很高兴,明天就IO了]_桃园三结义.avi</span></div><div class="line"></div><div class="line">			<span class="keyword">int</span> index = name.indexOf(<span class="string">"_"</span>);</div><div class="line">			String numberString = name.substring(index + <span class="number">1</span>, index + <span class="number">4</span>);</div><div class="line">	</div><div class="line">			<span class="keyword">int</span> endIndex = name.lastIndexOf(<span class="string">'_'</span>);</div><div class="line">			String nameString = name.substring(endIndex);</div><div class="line"></div><div class="line">			String newName = numberString.concat(nameString); <span class="comment">// 001_桃园三结义.avi</span></div><div class="line">			<span class="comment">// System.out.println(newName);</span></div><div class="line"></div><div class="line">			File newFile = <span class="keyword">new</span> File(srcFolder, newName); <span class="comment">// E:\\评书\\三国演义\\001_桃园三结义.avi</span></div><div class="line"></div><div class="line">			<span class="comment">// 重命名即可</span></div><div class="line">			file.renameTo(newFile);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day19/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day18/"><span>Java学习笔记_day18</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day18/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:37.023Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h2><p>将键映射到值的对象。一个映射不能包含重复的键；每个键最多只能映射到一个值。 </p>
<h3 id="和Collection的区别"><a href="#和Collection的区别" class="headerlink" title="和Collection的区别"></a>和Collection的区别</h3><p>Map存储元素是键值对，Map集合的键是唯一的，值是可重复的</p>
<p>Collection存储的是单个元素，Collection的子类Set是唯一的，List是可重复的。</p>
<h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>  1:添加功能<br>          V put(K key,V value):添加元素。<br>              如果键是第一次存储，就直接存储元素，返回null<br>              如果键不是第一次存在，就用值把以前的值替换掉，返回以前的值<br>  2:删除功能<br>          void clear():移除所有的键值对元素<br>          V remove(Object key)：根据键删除键值对元素，并把值返回<br>  3:判断功能<br>          boolean containsKey(Object key)：判断集合是否包含指定的键<br>          boolean containsValue(Object value):判断集合是否包含指定的值<br>          boolean isEmpty()：判断集合是否为空<br>  4:获取功能<br>          Set<map.entry<k,v>&gt; entrySet():???<br>          V get(Object key):根据键获取值<br>          Set<k> keySet():获取集合中所有键的集合<br>          Collection<v> values():获取集合中所有值的集合<br>  5：长度功能<br>          int size()：返回集合中的键值对的对数</v></k></map.entry<k,v></p>
<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><ul>
<li>思路一：遍历key</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取所有的键</span></div><div class="line">Set&lt;String&gt; set = map.keySet();</div><div class="line"><span class="comment">// 遍历键的集合，获取得到每一个键</span></div><div class="line"><span class="keyword">for</span> (String key : set) &#123;</div><div class="line">	<span class="comment">// 根据键去找值</span></div><div class="line">	String value = map.get(key);</div><div class="line">	System.out.println(key + <span class="string">"---"</span> + value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>思路二：获得所有的键值对</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取所有键值对对象的集合</span></div><div class="line">Set&lt;Map.Entry&lt;String, String&gt;&gt; set = map.entrySet();</div><div class="line"><span class="comment">// 遍历键值对对象的集合，得到每一个键值对对象</span></div><div class="line"><span class="keyword">for</span> (Map.Entry&lt;String, String&gt; me : set) &#123;</div><div class="line">	<span class="comment">// 根据键值对对象获取键和值</span></div><div class="line">	String key = me.getKey();</div><div class="line">	String value = me.getValue();</div><div class="line">	System.out.println(key + <span class="string">"---"</span> + value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h2><p>基于哈希表的 Map 接口的实现，哈希表结构保证建的唯一性。哈希结构底层依赖是hashCode和Equals方法</p>
<h3 id="键是引用类型的案例"><a href="#键是引用类型的案例" class="headerlink" title="键是引用类型的案例"></a>键是引用类型的案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * HashMap&lt;Student,String&gt;</div><div class="line"> * 键：Student</div><div class="line"> * 		要求：如果两个对象的成员变量值都相同，则为同一个对象。</div><div class="line"> * 值：String</div><div class="line"> * 实现：只要在Student类中重写两个方法即可，保证唯一性。hashCode()和equals方法</div><div class="line"> */</div></pre></td></tr></table></figure>
<h3 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h3><p>是Map接口的哈希表和链接列表实现，具有可预知的迭代顺序。由哈希表保证键的唯一性，链表保证键盘的有序(存储和取出的顺序一致)。</p>
<h3 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap"></a>TreeMap</h3><p>是基于红黑树的Map接口的实现。可以保证键的排序和唯一性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//排序示例如下，他也有两种方式</span></div><div class="line">		TreeMap&lt;Student, String&gt; tm = <span class="keyword">new</span> TreeMap&lt;Student, String&gt;(</div><div class="line">				<span class="keyword">new</span> Comparator&lt;Student&gt;() &#123;</div><div class="line">					<span class="meta">@Override</span></div><div class="line">					<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student s1, Student s2)</span> </span>&#123;</div><div class="line">						<span class="comment">// 主要条件</span></div><div class="line">						<span class="keyword">int</span> num = s1.getAge() - s2.getAge();</div><div class="line">						<span class="comment">// 次要条件</span></div><div class="line">						<span class="keyword">int</span> num2 = num == <span class="number">0</span> ? s1.getName().compareTo(</div><div class="line">								s2.getName()) : num;</div><div class="line">						<span class="keyword">return</span> num2;</div><div class="line">					&#125;</div><div class="line">				&#125;);</div></pre></td></tr></table></figure>
<h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 需求 ："aababcabcdabcde",获取字符串中每一个字母出现的次数要求结果:a(5)b(4)c(3)d(2)e(1)</div><div class="line"> * </div><div class="line"> * 分析：</div><div class="line"> * 		A:定义一个字符串(可以改进为键盘录入)</div><div class="line"> * 		B:定义一个TreeMap集合</div><div class="line"> * 			键:Character</div><div class="line"> * 			值：Integer</div><div class="line"> * 		C:把字符串转换为字符数组</div><div class="line"> * 		D:遍历字符数组，得到每一个字符</div><div class="line"> * 		E:拿刚才得到的字符作为键到集合中去找值，看返回值</div><div class="line"> * 			是null:说明该键不存在，就把该字符作为键，1作为值存储</div><div class="line"> * 			不是null:说明该键存在，就把值加1，然后重写存储该键和值</div><div class="line"> * 		F:定义字符串缓冲区变量</div><div class="line"> * 		G:遍历集合，得到键和值，进行按照要求拼接</div><div class="line"> * 		H:把字符串缓冲区转换为字符串输出</div><div class="line"> * </div><div class="line"> * 录入：linqingxia</div><div class="line"> * 结果：result:a(1)g(1)i(3)l(1)n(2)q(1)x(1)</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMapDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 定义一个字符串(可以改进为键盘录入)</span></div><div class="line">		Scanner sc = <span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入一个字符串："</span>);</div><div class="line">		String line = sc.nextLine();</div><div class="line"></div><div class="line">		<span class="comment">// 定义一个TreeMap集合</span></div><div class="line">		TreeMap&lt;Character, Integer&gt; tm = <span class="keyword">new</span> TreeMap&lt;Character, Integer&gt;();</div><div class="line">		</div><div class="line">		<span class="comment">//把字符串转换为字符数组</span></div><div class="line">		<span class="keyword">char</span>[] chs = line.toCharArray();</div><div class="line">		</div><div class="line">		<span class="comment">//遍历字符数组，得到每一个字符</span></div><div class="line">		<span class="keyword">for</span>(<span class="keyword">char</span> ch : chs)&#123;</div><div class="line">			<span class="comment">//拿刚才得到的字符作为键到集合中去找值，看返回值</span></div><div class="line">			Integer i =  tm.get(ch);</div><div class="line">			</div><div class="line">			<span class="comment">//是null:说明该键不存在，就把该字符作为键，1作为值存储</span></div><div class="line">			<span class="keyword">if</span>(i == <span class="keyword">null</span>)&#123;</div><div class="line">				tm.put(ch, <span class="number">1</span>);</div><div class="line">			&#125;<span class="keyword">else</span> &#123;</div><div class="line">				<span class="comment">//不是null:说明该键存在，就把值加1，然后重写存储该键和值</span></div><div class="line">				i++;</div><div class="line">				tm.put(ch,i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="comment">//定义字符串缓冲区变量</span></div><div class="line">		StringBuilder sb=  <span class="keyword">new</span> StringBuilder();</div><div class="line">		</div><div class="line">		<span class="comment">//遍历集合，得到键和值，进行按照要求拼接</span></div><div class="line">		Set&lt;Character&gt; set = tm.keySet();</div><div class="line">		<span class="keyword">for</span>(Character key : set)&#123;</div><div class="line">			Integer value = tm.get(key);</div><div class="line">			sb.append(key).append(<span class="string">"("</span>).append(value).append(<span class="string">")"</span>);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="comment">//把字符串缓冲区转换为字符串输出</span></div><div class="line">		String result = sb.toString();</div><div class="line">		System.out.println(<span class="string">"result:"</span>+result);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="HashMap和Hashtable"><a href="#HashMap和Hashtable" class="headerlink" title="HashMap和Hashtable"></a>HashMap和Hashtable</h3><p>  Hashtable:线程安全，效率低。不允许null键和null值<br>  HashMap:线程不安全，效率高。允许null键和null值</p>
<h3 id="习题-List-Set-Map等接口是否都继承子Map接口"><a href="#习题-List-Set-Map等接口是否都继承子Map接口" class="headerlink" title="习题 List,Set,Map等接口是否都继承子Map接口?"></a>习题 List,Set,Map等接口是否都继承子Map接口?</h3><p>  List，Set不是继承自Map接口，它们继承自Collection接口<br>  Map接口本身就是一个顶层接口</p>
<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><p>是针对集合进行操作的工具类，都是静态方法。</p>
<h4 id="Collection和Collections的区别"><a href="#Collection和Collections的区别" class="headerlink" title="Collection和Collections的区别?"></a>Collection和Collections的区别?</h4><p>  Collection:是单列集合的顶层接口，有子接口List和Set。<br>  Collections:是针对集合操作的工具类，有对集合进行排序和二分查找的方法</p>
<h4 id="常见方法"><a href="#常见方法" class="headerlink" title="常见方法"></a>常见方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(List&lt;T&gt; list)</span>：排序 默认情况下是自然顺序。</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(List&lt;?&gt; list,T key)</span>:二分查找</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title">max</span><span class="params">(Collection&lt;?&gt; coll)</span>:最大值</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(List&lt;?&gt; list)</span>:反转</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(List&lt;?&gt; list)</span>:随</div></pre></td></tr></table></figure>
<p>其中binarySearch在找不到的时候是最大索引加一然后在取负数。</p>
<blockquote>
<p>如果同时又比较器和自然排序，那么久采用自然排序</p>
</blockquote>
<h3 id="练习斗地主洗牌"><a href="#练习斗地主洗牌" class="headerlink" title="练习斗地主洗牌"></a>练习斗地主洗牌</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * 思路：</div><div class="line"> * 		A:创建一个HashMap集合</div><div class="line"> * 		B:创建一个ArrayList集合</div><div class="line"> * 		C:创建花色数组和点数数组</div><div class="line"> * 		D:从0开始往HashMap里面存储编号，并存储对应的牌</div><div class="line"> *        同时往ArrayList里面存储编号即可。</div><div class="line"> *      E:洗牌(洗的是编号)</div><div class="line"> *      F:发牌(发的也是编号，为了保证编号是排序的，就创建TreeSet集合接收)</div><div class="line"> *      G:看牌(遍历TreeSet集合，获取编号，到HashMap集合找对应的牌)</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PokerDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建一个HashMap集合</span></div><div class="line">		HashMap&lt;Integer, String&gt; hm = <span class="keyword">new</span> HashMap&lt;Integer, String&gt;();</div><div class="line"></div><div class="line">		<span class="comment">// 创建一个ArrayList集合</span></div><div class="line">		ArrayList&lt;Integer&gt; array = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line"></div><div class="line">		<span class="comment">// 创建花色数组和点数数组</span></div><div class="line">		<span class="comment">// 定义一个花色数组</span></div><div class="line">		String[] colors = &#123; <span class="string">"♠"</span>, <span class="string">"♥"</span>, <span class="string">"♣"</span>, <span class="string">"♦"</span> &#125;;</div><div class="line">		<span class="comment">// 定义一个点数数组</span></div><div class="line">		String[] numbers = &#123; <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>, <span class="string">"6"</span>, <span class="string">"7"</span>, <span class="string">"8"</span>, <span class="string">"9"</span>, <span class="string">"10"</span>, <span class="string">"J"</span>, <span class="string">"Q"</span>,</div><div class="line">				<span class="string">"K"</span>, <span class="string">"A"</span>, <span class="string">"2"</span>, &#125;;</div><div class="line"></div><div class="line">		<span class="comment">// 从0开始往HashMap里面存储编号，并存储对应的牌,同时往ArrayList里面存储编号即可。</span></div><div class="line">		<span class="keyword">int</span> index = <span class="number">0</span>;</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (String number : numbers) &#123;</div><div class="line">			<span class="keyword">for</span> (String color : colors) &#123;</div><div class="line">				String poker = color.concat(number);</div><div class="line">				hm.put(index, poker);</div><div class="line">				array.add(index);</div><div class="line">				index++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		hm.put(index, <span class="string">"小王"</span>);</div><div class="line">		array.add(index);</div><div class="line">		index++;</div><div class="line">		hm.put(index, <span class="string">"大王"</span>);</div><div class="line">		array.add(index);</div><div class="line"></div><div class="line">		<span class="comment">// 洗牌(洗的是编号)</span></div><div class="line">		Collections.shuffle(array);</div><div class="line"></div><div class="line">		<span class="comment">// 发牌(发的也是编号，为了保证编号是排序的，就创建TreeSet集合接收)</span></div><div class="line">		TreeSet&lt;Integer&gt; fengQingYang = <span class="keyword">new</span> TreeSet&lt;Integer&gt;();</div><div class="line">		TreeSet&lt;Integer&gt; linQingXia = <span class="keyword">new</span> TreeSet&lt;Integer&gt;();</div><div class="line">		TreeSet&lt;Integer&gt; liuYi = <span class="keyword">new</span> TreeSet&lt;Integer&gt;();</div><div class="line">		TreeSet&lt;Integer&gt; diPai = <span class="keyword">new</span> TreeSet&lt;Integer&gt;();</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; array.size(); x++) &#123;</div><div class="line">			<span class="keyword">if</span> (x &gt;= array.size() - <span class="number">3</span>) &#123;</div><div class="line">				diPai.add(array.get(x));</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x % <span class="number">3</span> == <span class="number">0</span>) &#123;</div><div class="line">				fengQingYang.add(array.get(x));</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x % <span class="number">3</span> == <span class="number">1</span>) &#123;</div><div class="line">				linQingXia.add(array.get(x));</div><div class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x % <span class="number">3</span> == <span class="number">2</span>) &#123;</div><div class="line">				liuYi.add(array.get(x));</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 看牌(遍历TreeSet集合，获取编号，到HashMap集合找对应的牌)</span></div><div class="line">		lookPoker(<span class="string">"风清扬"</span>, fengQingYang, hm);</div><div class="line">		lookPoker(<span class="string">"林青霞"</span>, linQingXia, hm);</div><div class="line">		lookPoker(<span class="string">"刘意"</span>, liuYi, hm);</div><div class="line">		lookPoker(<span class="string">"底牌"</span>, diPai, hm);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// 写看牌的功能</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lookPoker</span><span class="params">(String name, TreeSet&lt;Integer&gt; ts,</span></span></div><div class="line">			HashMap&lt;Integer, String&gt; hm) &#123;</div><div class="line">		System.out.print(name + <span class="string">"的牌是："</span>);</div><div class="line">		<span class="keyword">for</span> (Integer key : ts) &#123;</div><div class="line">			String value = hm.get(key);</div><div class="line">			System.out.print(value + <span class="string">" "</span>);</div><div class="line">		&#125;</div><div class="line">		System.out.println();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day18/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day17/"><span>Java学习笔记_day17</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day17/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:36.945Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h2><ul>
<li>ctrl + shift + o 导包</li>
<li>ctrl + shift + t 快速查找某个类</li>
<li>先按ctrl + 2 ,再点L, 创建变量并命名</li>
<li>ctrl + o , 在当前类中,快速查找某个方法</li>
<li>ctrl + k, 向下查找某个字符串</li>
<li>ctrl + shift + k, 向上查找某个字符串</li>
<li>alt + 左方向键 跳转上一个页面</li>
</ul>
<h2 id="toStrring源码分析"><a href="#toStrring源码分析" class="headerlink" title="toStrring源码分析"></a>toStrring源码分析</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">代码：</div><div class="line">	Collection c = <span class="keyword">new</span> ArrayList();</div><div class="line">	c.add(<span class="string">"hello"</span>);</div><div class="line">	c.add(<span class="string">"world"</span>);</div><div class="line">	c.add(<span class="string">"java"</span>);</div><div class="line">	</div><div class="line">	System.out.println(c);</div><div class="line">	</div><div class="line">为什么c输出的不是地址值呢?</div><div class="line">	A:Collection c = <span class="keyword">new</span> ArrayList();</div><div class="line">		这是多态，所以输出c的toString()方法，其实是输出ArrayList的toString()</div><div class="line">	B:看ArrayList的toString()</div><div class="line">		而我们在ArrayList里面却没有发现toString()。</div><div class="line">		以后遇到这种情况，也不要担心，你认为有，它却没有，就应该去它父亲里面看看。</div><div class="line">	C:toString()的方法源码</div><div class="line">	</div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">	        Iterator&lt;E&gt; it = iterator(); <span class="comment">//集合本身调用迭代器方法，得到集合迭代器</span></div><div class="line">	        <span class="keyword">if</span> (! it.hasNext())</div><div class="line">	            <span class="keyword">return</span> <span class="string">"[]"</span>;</div><div class="line">	</div><div class="line">	        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line">	        sb.append(<span class="string">'['</span>);</div><div class="line">	        <span class="keyword">for</span> (;;) &#123;</div><div class="line">	            E e = it.next(); <span class="comment">//e=hello,world,java</span></div><div class="line">	            sb.append(e == <span class="keyword">this</span> ? <span class="string">"(this Collection)"</span> : e);</div><div class="line">	            <span class="keyword">if</span> (! it.hasNext())</div><div class="line">	            	<span class="comment">//[hello, world, java]</span></div><div class="line">	                <span class="keyword">return</span> sb.append(<span class="string">']'</span>).toString();</div><div class="line">	            sb.append(<span class="string">','</span>).append(<span class="string">' '</span>);</div><div class="line">	        &#125;</div><div class="line">	    &#125;</div></pre></td></tr></table></figure>
<h2 id="建立一个用户登录案例"><a href="#建立一个用户登录案例" class="headerlink" title="建立一个用户登录案例"></a>建立一个用户登录案例</h2><h3 id="分包"><a href="#分包" class="headerlink" title="分包"></a>分包</h3><pre><code>A:功能划分
B:模块划分
C:先按模块划分，再按功能划分
</code></pre><p>pojo       简单的Java对象（Plain Old Java Object）</p>
<p>impl   接口的实现</p>
<p>如果方法的参数小于等于3个那么正常写，如果大于三个就传入一个对象。</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>多个对象共享同一个成员变量，用静态；</p>
<p>循环里面如果有switch，并且在switch里面有break，那么结束的不是循环，而是switch语句，可以使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">System.exit(<span class="number">0</span>);</div></pre></td></tr></table></figure>
<h2 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h2><p>无序(存储顺序和取出顺序不一致),唯一，有相同的数据存入集合，集合只是存入不同的，<strong>相同的元素存一个</strong></p>
<h3 id="HasHSet的set方法源码分析"><a href="#HasHSet的set方法源码分析" class="headerlink" title="HasHSet的set方法源码分析"></a>HasHSet的set方法源码分析</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//首先hashSet继承自set类</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HashSet</span> <span class="keyword">implements</span> <span class="title">Set</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</div><div class="line">	<span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</div><div class="line">		map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123; <span class="comment">//e=hello,world</span></div><div class="line">        <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>他的本质应用就是HashMap，hashMap的源码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HashMap</span> <span class="keyword">implements</span> <span class="title">Map</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123; <span class="comment">//key=e=hello,world</span></div><div class="line">	</div><div class="line">		<span class="comment">//看哈希表是否为空，如果空，就开辟空间</span></div><div class="line">        <span class="keyword">if</span> (table == EMPTY_TABLE) &#123;</div><div class="line">            inflateTable(threshold);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">//判断对象是否为null</span></div><div class="line">        <span class="keyword">if</span> (key == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">return</span> putForNullKey(value);</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> hash = hash(key); <span class="comment">//和对象的hashCode()方法相关</span></div><div class="line">        </div><div class="line">        <span class="comment">//在哈希表中查找hash值</span></div><div class="line">        <span class="keyword">int</span> i = indexFor(hash, table.length);</div><div class="line">        <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123;</div><div class="line">        	<span class="comment">//这次的e其实是第一次的world</span></div><div class="line">            Object k;</div><div class="line">            <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</div><div class="line">                V oldValue = e.value;</div><div class="line">                e.value = value;</div><div class="line">                e.recordAccess(<span class="keyword">this</span>);</div><div class="line">                <span class="keyword">return</span> oldValue;</div><div class="line">                <span class="comment">//走这里其实是没有添加元素</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        modCount++;</div><div class="line">        addEntry(hash, key, value, i); <span class="comment">//把元素添加</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">transient</span> <span class="keyword">int</span> hashSeed = <span class="number">0</span>;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object k)</span> </span>&#123; <span class="comment">//k=key=e=hello,</span></div><div class="line">        <span class="keyword">int</span> h = hashSeed;</div><div class="line">        <span class="keyword">if</span> (<span class="number">0</span> != h &amp;&amp; k <span class="keyword">instanceof</span> String) &#123;</div><div class="line">            <span class="keyword">return</span> sun.misc.Hashing.stringHash32((String) k);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        h ^= k.hashCode(); <span class="comment">//这里调用的是对象的hashCode()方法</span></div><div class="line"></div><div class="line">        <span class="comment">// This function ensures that hashCodes that differ only by</span></div><div class="line">        <span class="comment">// constant multiples at each bit position have a bounded</span></div><div class="line">        <span class="comment">// number of collisions (approximately 8 at default load factor).</span></div><div class="line">        h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</div><div class="line">        <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>通过查看add方法的源码，我们知道这个方法底层依赖 两个方法：hashCode()和equals()。</p>
</blockquote>
<p>按照方法的步骤来说：    先看hashCode()值是否相同</p>
<p>​    相同:继续走equals()方法</p>
<p>​        返回true：    说明元素重复，就不添加</p>
<p>​        返回false：说明元素不重复，就添加到集合</p>
<p>​    不同：就直接把元素添加到集合</p>
<p>如果类没有重写这两个方法，默认使用的Object()。一般来说不同相同。</p>
<p>而String类重写了hashCode()和equals()方法，所以，它就可以把内容相同的字符串去掉。只留下一个。</p>
<h3 id="用hashSet存储引用类型"><a href="#用hashSet存储引用类型" class="headerlink" title="用hashSet存储引用类型"></a>用hashSet存储引用类型</h3><p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetDemo2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		HashSet&lt;Student&gt; hs = <span class="keyword">new</span> HashSet&lt;Student&gt;();</div><div class="line"></div><div class="line">		<span class="comment">// 创建学生对象</span></div><div class="line">		Student s1 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">27</span>);</div><div class="line">		Student s2 = <span class="keyword">new</span> Student(<span class="string">"柳岩"</span>, <span class="number">22</span>);</div><div class="line">		Student s3 = <span class="keyword">new</span> Student(<span class="string">"王祖贤"</span>, <span class="number">30</span>);</div><div class="line">		Student s4 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">27</span>);</div><div class="line">		Student s5 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">20</span>);</div><div class="line">		Student s6 = <span class="keyword">new</span> Student(<span class="string">"范冰冰"</span>, <span class="number">22</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 添加元素</span></div><div class="line">		hs.add(s1);</div><div class="line">		hs.add(s2);</div><div class="line">		hs.add(s3);</div><div class="line">		hs.add(s4);</div><div class="line">		hs.add(s5);</div><div class="line">		hs.add(s6);</div><div class="line"></div><div class="line">		<span class="comment">// 遍历集合</span></div><div class="line">		<span class="keyword">for</span> (Student s : hs) &#123;</div><div class="line">			System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">王祖贤---30</div><div class="line">范冰冰---22</div><div class="line">林青霞---20</div><div class="line">林青霞---27</div><div class="line">柳岩---22</div><div class="line">林青霞---27</div></pre></td></tr></table></figure>
<p>没有反映出唯一的性质，但是可以看出它是无序的。</p>
<p>为了使上面的代码达到如下目的：</p>
<p>  需求：存储自定义对象，并保证元素的唯一性<br>  要求：如果两个对象的成员变量值都相同，则为同一个元素。</p>
<p>改进stutend类，新增两个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">final</span> <span class="keyword">int</span> prime = <span class="number">31</span>;</div><div class="line">	<span class="keyword">int</span> result = <span class="number">1</span>;</div><div class="line">	result = prime * result + age;</div><div class="line">	result = prime * result + ((name == <span class="keyword">null</span>) ? <span class="number">0</span> : name.hashCode());</div><div class="line">	<span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (<span class="keyword">this</span> == obj)</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	<span class="keyword">if</span> (obj == <span class="keyword">null</span>)</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	<span class="keyword">if</span> (getClass() != obj.getClass())</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	Student other = (Student) obj;</div><div class="line">	<span class="keyword">if</span> (age != other.age)</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	<span class="keyword">if</span> (name == <span class="keyword">null</span>) &#123;</div><div class="line">		<span class="keyword">if</span> (other.name != <span class="keyword">null</span>)</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="LinkEdHashSet"><a href="#LinkEdHashSet" class="headerlink" title="LinkEdHashSet"></a>LinkEdHashSet</h3><p>LinkedHashSet:底层数据结构由哈希表和链表组成。哈希表保证元素的唯一性。链表保证元素有素。(存储和取出是一致)</p>
<h3 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h3><p>能够对元素按照某种规则进行排序，底层是二叉树结构，是TreeMap。</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>排序（是指按照某种顺序排列，而不是像list的进出有顺序）和唯一</p>
<h4 id="排列方式"><a href="#排列方式" class="headerlink" title="排列方式"></a>排列方式</h4><ol>
<li>自然排序（无参构造方法默认排序方法）</li>
<li>比较器排序（带参构造函数）</li>
</ol>
<blockquote>
<p>comparable自然排序</p>
</blockquote>
<h4 id="本质比较依赖"><a href="#本质比较依赖" class="headerlink" title="本质比较依赖"></a>本质比较依赖</h4><p>真正的比较是依赖于元素的compareTo()方法，而这个方法是定义在 Comparable里面的。<br>所以，你要想重写该方法，就必须是先实现 Comparable接口。这个接口表示的就是自然排序。</p>
<h4 id="使用TreeSet存储引用类型的数据"><a href="#使用TreeSet存储引用类型的数据" class="headerlink" title="使用TreeSet存储引用类型的数据"></a>使用TreeSet存储引用类型的数据</h4><p><strong>javaBean必须实现comparable接口，同时重写compareTo方法,没有实现会报错</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//目的:TreeSet存储自定义对象并保证排序和唯一</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Student s)</span> </span>&#123;</div><div class="line">		<span class="comment">// 这里返回什么，其实应该根据我的排序规则来做</span></div><div class="line">		<span class="comment">// 按照年龄排序,主要条件</span></div><div class="line">		<span class="keyword">int</span> num = <span class="keyword">this</span>.age - s.age;</div><div class="line">		<span class="comment">// 次要条件</span></div><div class="line">		<span class="comment">// 年龄相同的时候，还得去看姓名是否也相同</span></div><div class="line">		<span class="comment">// 如果年龄和姓名都相同，才是同一个元素</span></div><div class="line">		<span class="keyword">int</span> num2 = num == <span class="number">0</span> ? <span class="keyword">this</span>.name.compareTo(s.name) : num;</div><div class="line">		<span class="keyword">return</span> num2;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>而且String类也实现了comparable（自然排序）接口，而且重写了compareTo方法</p>
<p><strong>如果一个类的元素要想能够进行自然排序，就必须实现自然排序接口Comparable</strong></p>
<h4 id="使用比较器来排序"><a href="#使用比较器来排序" class="headerlink" title="使用比较器来排序"></a>使用比较器来排序</h4><ul>
<li>可以使用comparator的实现类来构建treeset</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//需求：请按照姓名的长度排序</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student s1, Student s2)</span> </span>&#123;</div><div class="line">		<span class="comment">// int num = this.name.length() - s.name.length();</span></div><div class="line">		<span class="comment">// this -- s1</span></div><div class="line">		<span class="comment">// s -- s2</span></div><div class="line">		<span class="comment">// 姓名长度</span></div><div class="line">		<span class="keyword">int</span> num = s1.getName().length() - s2.getName().length();</div><div class="line">		<span class="comment">// 姓名内容</span></div><div class="line">		<span class="keyword">int</span> num2 = num == <span class="number">0</span> ? s1.getName().compareTo(s2.getName()) : num;</div><div class="line">		<span class="comment">// 年龄</span></div><div class="line">		<span class="keyword">int</span> num3 = num2 == <span class="number">0</span> ? s1.getAge() - s2.getAge() : num2;</div><div class="line">		<span class="keyword">return</span> num3;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>可以使用匿名内部类来创建treeSet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">TreeSet&lt;Student&gt; ts = <span class="keyword">new</span> TreeSet&lt;Student&gt;(<span class="keyword">new</span> Comparator&lt;Student&gt;() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Student s1, Student s2)</span> </span>&#123;</div><div class="line">		<span class="comment">// 姓名长度</span></div><div class="line">		<span class="keyword">int</span> num = s1.getName().length() - s2.getName().length();</div><div class="line">		<span class="comment">// 姓名内容</span></div><div class="line">		<span class="keyword">int</span> num2 = num == <span class="number">0</span> ? s1.getName().compareTo(s2.getName())</div><div class="line">				: num;</div><div class="line">		<span class="comment">// 年龄</span></div><div class="line">		<span class="keyword">int</span> num3 = num2 == <span class="number">0</span> ? s1.getAge() - s2.getAge() : num2;</div><div class="line">		<span class="keyword">return</span> num3;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//比较而言更加简单</span></div></pre></td></tr></table></figure>
<h4 id="保证"><a href="#保证" class="headerlink" title="保证"></a>保证</h4><p>唯一性：是根据比较的返回是否是0来决定。</p>
<p> 排序：<br>      A:自然排序(元素具备比较性)<br>          让元素所属的类实现自然排序接口 Comparable<br>      B:比较器排序(集合具备比较性)<br>          让集合的构造方法接收一个比较器接口的子类对象 Comparator</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day17/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day16/"><span>Java学习笔记_day16</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day16/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:36.835Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="list的子类"><a href="#list的子类" class="headerlink" title="list的子类"></a>list的子类</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>ArrayList</li>
</ul>
<p>底层是数组，查询快，增删慢，线程不安全，效率高</p>
<ul>
<li>Vector</li>
</ul>
<p>底层是数组，查询快，增删慢，线程不安全，效率高</p>
<ul>
<li>LinkedList</li>
</ul>
<p>底层是链表，查询慢，增删快，线程不安全，效率高</p>
<h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p>遍历操作（和list一样有两种方式）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		ArrayList array = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line">		<span class="comment">// 创建元素对象，并添加元素</span></div><div class="line">		array.add(<span class="string">"hello"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 遍历</span></div><div class="line">		Iterator it = array.iterator();</div><div class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">			String s = (String) it.next();</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"-----------"</span>);</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; array.size(); x++) &#123;</div><div class="line">			String s = (String) array.get(x);</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Vector特有功能"><a href="#Vector特有功能" class="headerlink" title="Vector特有功能"></a>Vector特有功能</h3><h4 id="添加功能"><a href="#添加功能" class="headerlink" title="添加功能"></a>添加功能</h4><p>public void addElement(Object obj)        –    add()</p>
<h4 id="获取功能"><a href="#获取功能" class="headerlink" title="获取功能"></a>获取功能</h4><p>public Object elementAt(int index)        –  get()</p>
<p>public Enumeration elements()            –    Iterator iterator()</p>
<p>boolean hasMoreElements()                hasNext()</p>
<p>Object nextElement()                    next()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VectorDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		Vector v = <span class="keyword">new</span> Vector();</div><div class="line"></div><div class="line">		<span class="comment">// 添加功能</span></div><div class="line">		v.addElement(<span class="string">"hello"</span>);</div><div class="line">		v.addElement(<span class="string">"world"</span>);</div><div class="line">		v.addElement(<span class="string">"java"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 遍历</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; v.size(); x++) &#123;</div><div class="line">			String s = (String) v.elementAt(x);</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"------------------"</span>);</div><div class="line"></div><div class="line">		Enumeration en = v.elements(); <span class="comment">// 返回的是实现类的对象</span></div><div class="line">		<span class="keyword">while</span> (en.hasMoreElements()) &#123;</div><div class="line">			String s = (String) en.nextElement();</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="LinkedList特有功能"><a href="#LinkedList特有功能" class="headerlink" title="LinkedList特有功能"></a>LinkedList特有功能</h3><h4 id="添加功能-1"><a href="#添加功能-1" class="headerlink" title="添加功能"></a>添加功能</h4><p>public void addFirst(Object e)</p>
<p>public void addLast(Object e)</p>
<h4 id="获取功能-1"><a href="#获取功能-1" class="headerlink" title="获取功能"></a>获取功能</h4><p>public Object getFirst()</p>
<p>public Obejct getLast()</p>
<h4 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h4><p>public Object removeFirst()</p>
<p>public Object removeLast()</p>
<h3 id="去除ArrayList中的重复元素"><a href="#去除ArrayList中的重复元素" class="headerlink" title="去除ArrayList中的重复元素"></a>去除ArrayList中的重复元素</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		ArrayList array = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line">		<span class="comment">// 添加多个字符串元素(包含内容相同的)</span></div><div class="line">		array.add(<span class="string">"hello"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 创建新集合</span></div><div class="line">		ArrayList newArray = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line">		<span class="comment">// 遍历旧集合,获取得到每一个元素</span></div><div class="line">		Iterator it = array.iterator();</div><div class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">			String s = (String) it.next();</div><div class="line"></div><div class="line">			<span class="comment">// 拿这个元素到新集合去找，看有没有</span></div><div class="line">			<span class="keyword">if</span> (!newArray.contains(s)) &#123;</div><div class="line">				newArray.add(s);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 遍历新集合</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; newArray.size(); x++) &#123;</div><div class="line">			String s = (String) newArray.get(x);</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>java.util.ArrayList$Itr@1ee0005其中    </p>
<p>$表示的是内部类</p>
<p>  需求：ArrayList去除集合中字符串的重复值(字符串的内容相同)<br>  要求：不能创建新的集合，就在以前的集合上做。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		ArrayList array = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line">		<span class="comment">// 添加多个字符串元素(包含内容相同的)</span></div><div class="line">		array.add(<span class="string">"hello"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line">		array.add(<span class="string">"java"</span>);</div><div class="line">		array.add(<span class="string">"world"</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 由选择排序思想引入，我们就可以通过这种思想做这个题目</span></div><div class="line">		<span class="comment">// 拿0索引的依次和后面的比较，有就把后的干掉</span></div><div class="line">		<span class="comment">// 同理，拿1索引...</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; array.size() - <span class="number">1</span>; x++) &#123;</div><div class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> y = x + <span class="number">1</span>; y &lt; array.size(); y++) &#123;</div><div class="line">				<span class="keyword">if</span> (array.get(x).equals(array.get(y))) &#123;</div><div class="line">					array.remove(y);</div><div class="line">					y--;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 遍历集合</span></div><div class="line">		Iterator it = array.iterator();</div><div class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">			String s = (String) it.next();</div><div class="line">			System.out.println(s);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>重点是：<strong>y–</strong>，因为假如有连续的相同而且都要删除的目标那么就会错过。</p>
<h3 id="去除集合中自定义对象的重复值"><a href="#去除集合中自定义对象的重复值" class="headerlink" title="去除集合中自定义对象的重复值"></a>去除集合中自定义对象的重复值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayListDemo3</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">// 创建集合对象</span></div><div class="line">		ArrayList array = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line">		<span class="comment">// 创建学生对象</span></div><div class="line">		Student s1 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">27</span>);</div><div class="line">		Student s2 = <span class="keyword">new</span> Student(<span class="string">"林志玲"</span>, <span class="number">40</span>);</div><div class="line">		Student s3 = <span class="keyword">new</span> Student(<span class="string">"凤姐"</span>, <span class="number">35</span>);</div><div class="line">		Student s4 = <span class="keyword">new</span> Student(<span class="string">"芙蓉姐姐"</span>, <span class="number">18</span>);</div><div class="line">		Student s5 = <span class="keyword">new</span> Student(<span class="string">"翠花"</span>, <span class="number">16</span>);</div><div class="line">		Student s6 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">27</span>);</div><div class="line">		Student s7 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">18</span>);</div><div class="line"></div><div class="line">		<span class="comment">// 添加元素</span></div><div class="line">		array.add(s1);</div><div class="line">		array.add(s2);</div><div class="line">		array.add(s3);</div><div class="line">		array.add(s4);</div><div class="line">		array.add(s5);</div><div class="line">		array.add(s6);</div><div class="line">		array.add(s7);</div><div class="line"></div><div class="line">		<span class="comment">// 创建新集合</span></div><div class="line">		ArrayList newArray = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line">		<span class="comment">// 遍历旧集合,获取得到每一个元素</span></div><div class="line">		Iterator it = array.iterator();</div><div class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">			Student s = (Student) it.next();</div><div class="line"></div><div class="line">			<span class="comment">// 拿这个元素到新集合去找，看有没有</span></div><div class="line">			<span class="keyword">if</span> (!newArray.contains(s)) &#123;</div><div class="line">				newArray.add(s);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 遍历新集合</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; newArray.size(); x++) &#123;</div><div class="line">			Student s = (Student) newArray.get(x);</div><div class="line">			System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>  我们按照和字符串一样的操作，发现出问题了。<br>  为什么呢?<br>          我们必须思考哪里会出问题?<br>          通过简单的分析，我们知道问题出现在了判断上。<br>          而这个判断功能是集合自己提供的，所以我们如果想很清楚的知道它是如何判断的，就应该去看源码。<br>  contains()方法的底层依赖的是equals()方法。<br>  而我们的学生类中没有equals()方法，这个时候，默认使用的是它父亲Object的equals()方法<br>  Object()的equals()默认比较的是地址值，所以，它们进去了。因为new的东西，地址值都不同。<br>  按照我们自己的需求，比较成员变量的值，重写equals()即可。<br>  自动生成即可。</p>
<h3 id="请用LinkedList模拟栈数据结构的集合，并测试"><a href="#请用LinkedList模拟栈数据结构的集合，并测试" class="headerlink" title="请用LinkedList模拟栈数据结构的集合，并测试"></a>请用LinkedList模拟栈数据结构的集合，并测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStack</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> LinkedList link;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyStack</span><span class="params">()</span> </span>&#123;</div><div class="line">		link = <span class="keyword">new</span> LinkedList();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">		link.addFirst(obj);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// return link.getFirst();</span></div><div class="line">		<span class="keyword">return</span> link.removeFirst();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> link.isEmpty();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>底层用其他类来封装，而且设置私有，然后在构造方法中初始化的这种封装思想。</p>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>是一种把类型明确的工作推迟的对象创建或者调用的时候才去确定的特殊类型，也叫参数化类型，把类型当成参数传递，是jdk5引入。</p>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>&lt;数据类型&gt;   这里的数据类型只能是引用类型。</p>
<h3 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h3><ul>
<li>把运行时期的问题提前到来编译时期</li>
<li>避免的强制转化</li>
<li>优化程序设计</li>
</ul>
<h3 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h3><p>格式:public &lt;泛型类型&gt; 返回类型 方法名(泛型类型 .)</p>
<p>接口的实现类名一般是在接口名后面加上<strong>Impl</strong>作为实现类名</p>
<h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><p>实现类在实现接口的时候</p>
<p>第一种情况：已经知道该是什么类型的了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Inter&lt;String&gt; i = <span class="keyword">new</span> InterImpl()</div></pre></td></tr></table></figure>
<p>第二种情况：还不知道是什么类型的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Inter&lt;String&gt; i = <span class="keyword">new</span> InterImpl&lt;String&gt;();</div></pre></td></tr></table></figure>
<h3 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h3><ul>
<li>泛型通配符&lt;?&gt;表示任意类型，没有明确类型，就是Object，如果泛型左边声明具体的类型，那么右边也一定要声明一样的类型</li>
<li>? extends E 向下限定，E及其子类</li>
<li>? super E E及其父类</li>
</ul>
<h2 id="JDK5新特性"><a href="#JDK5新特性" class="headerlink" title="JDK5新特性"></a>JDK5新特性</h2><h3 id="自动拆装箱"><a href="#自动拆装箱" class="headerlink" title="自动拆装箱"></a>自动拆装箱</h3><h3 id="泛型-1"><a href="#泛型-1" class="headerlink" title="泛型"></a>泛型</h3><h3 id="增强for循环"><a href="#增强for循环" class="headerlink" title="增强for循环"></a>增强for循环</h3><p>  ####格式<br>          for(元素数据类型 变量 : 数组或者Collection集合) {<br>             使用变量即可，该变量就是元素</p>
<h4 id="弊端"><a href="#弊端" class="headerlink" title="弊端"></a>弊端</h4><p>增强for的目标不能为null。对增强for的目标先进行不为null的判断，然后在使用。否则会报NullPointerException空指针异常</p>
<h4 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h4><p>增强for其实是用来替代迭代器的，证明如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (String s : array) &#123;</div><div class="line">	<span class="keyword">if</span> (<span class="string">"world"</span>.equals(s)) &#123;</div><div class="line">		array.add(<span class="string">"javaee"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>它会报错ConcurrentModificationException和迭代器同时遍历更改报错一样</p>
<h3 id="静态导入"><a href="#静态导入" class="headerlink" title="静态导入"></a>静态导入</h3><p>格式：import static 包名….类名.方法名;</p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ol>
<li>方法必须是静态的</li>
<li>如果有多个同名的静态方法，不知道使用谁</li>
</ol>
<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><p>定义方法的时候不知道该定义多少个参数</p>
<h4 id="格式-1"><a href="#格式-1" class="headerlink" title="格式"></a>格式</h4><p>修饰符 返回值类型 方法名(数据类型…  变量名){}</p>
<h4 id="实质"><a href="#实质" class="headerlink" title="实质"></a>实质</h4><p>这里的变量其实是一个数组</p>
<h4 id="注意-1"><a href="#注意-1" class="headerlink" title="注意"></a>注意</h4><p>如果一个方法有可变参数，并且有多个参数，那么，可变参数肯定是最后一个</p>
<h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><p>ArrayList存储自定义对象并遍历。要求加入泛型，并用增强for遍历。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"> A:迭代器</div><div class="line"> B:普通<span class="keyword">for</span></div><div class="line"> C:增强<span class="function"><span class="keyword">for</span></span></div><div class="line"> 	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> &#123;</div><div class="line">	<span class="comment">// 创建集合对象</span></div><div class="line">	ArrayList&lt;Student&gt; array = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</div><div class="line"></div><div class="line">	<span class="comment">// 创建学生对象</span></div><div class="line">	Student s1 = <span class="keyword">new</span> Student(<span class="string">"林青霞"</span>, <span class="number">27</span>);</div><div class="line">	Student s2 = <span class="keyword">new</span> Student(<span class="string">"貂蝉"</span>, <span class="number">22</span>);</div><div class="line">	Student s3 = <span class="keyword">new</span> Student(<span class="string">"杨玉环"</span>, <span class="number">24</span>);</div><div class="line">	Student s4 = <span class="keyword">new</span> Student(<span class="string">"西施"</span>, <span class="number">21</span>);</div><div class="line">	Student s5 = <span class="keyword">new</span> Student(<span class="string">"王昭君"</span>, <span class="number">23</span>);</div><div class="line"></div><div class="line">	<span class="comment">// 把学生对象添加到集合中</span></div><div class="line">	array.add(s1);</div><div class="line">	array.add(s2);</div><div class="line">	array.add(s3);</div><div class="line">	array.add(s4);</div><div class="line">	array.add(s5);</div><div class="line"></div><div class="line">	<span class="comment">// 迭代器</span></div><div class="line">	Iterator&lt;Student&gt; it = array.iterator();</div><div class="line">	<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">		Student s = it.next();</div><div class="line">		System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">	&#125;</div><div class="line">	System.out.println(<span class="string">"---------------"</span>);</div><div class="line"></div><div class="line">	<span class="comment">// 普通for</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; array.size(); x++) &#123;</div><div class="line">		Student s = array.get(x);</div><div class="line">		System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">	&#125;</div><div class="line">	System.out.println(<span class="string">"---------------"</span>);</div><div class="line"></div><div class="line">	<span class="comment">// 增强for</span></div><div class="line">	<span class="keyword">for</span> (Student s : array) &#123;</div><div class="line">		System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ArrayList的asList方法"><a href="#ArrayList的asList方法" class="headerlink" title="ArrayList的asList方法"></a>ArrayList的asList方法</h2><p>可以把数组转换成集合</p>
<p>public static <t> List<t> asList(T… a):把数组转成集合</t></t></p>
<p>但是其本质还是一个数组，而且数组的长度不可变所以一切与数组长度有关的操作都会报错<strong>UnsupportedOperationException</strong>（即曾和删不可以）不支持的操作，但是更改操作可以</p>
<blockquote>
<p>ArrayList可以嵌套<strong>ArrayList<arraylist<student>&gt;</arraylist<student></strong></p>
</blockquote>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day16/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/03/13/Java学习笔记_day15/"><span>Java学习笔记_day15</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/03/13/Java学习笔记_day15/" rel="bookmark">
        <time class="entry-date published" datetime="2017-03-13T14:29:36.773Z">
          2017-03-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="集合框架"><a href="#集合框架" class="headerlink" title="集合框架"></a>集合框架</h2><p>面向对象语言对事物的体现都是一对象的形式，所以为了方便操作对象，java提供了集合类。</p>
<p>数组虽然可以存储对象但是长度是固定的，集合长度是可变的，数组可以存储基本数据类型，集合只能存储对象。</p>
<h3 id="数组和集合的区别"><a href="#数组和集合的区别" class="headerlink" title="数组和集合的区别"></a>数组和集合的区别</h3><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">数组</th>
<th style="text-align:center">集合</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">长度</td>
<td style="text-align:center">长度固定</td>
<td style="text-align:center">长度可变</td>
</tr>
<tr>
<td style="text-align:center">元素</td>
<td style="text-align:center">同一种</td>
<td style="text-align:center">可以不同类型</td>
</tr>
<tr>
<td style="text-align:center">数据类型</td>
<td style="text-align:center">基本类型、引用类型</td>
<td style="text-align:center">只能是引用类型</td>
</tr>
</tbody>
</table>
<p>我们得到有个继承体系，在分析问题时我们从具体到抽象，在实现时，我们从抽象到具体，在使用时我们使用具体</p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h3><p>是集合的顶层接口，他的子体系有重复的也有唯一的，有序的，无序的</p>
<h4 id="添加功能"><a href="#添加功能" class="headerlink" title="添加功能"></a>添加功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">add</span><span class="params">(Object obj)</span>:添加一个元素</span></div><div class="line"><span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection c)</span>:添加一个集合的元素</div></pre></td></tr></table></figure>
<h4 id="删除功能"><a href="#删除功能" class="headerlink" title="删除功能"></a>删除功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span>:移除所有元素</span></div><div class="line"><span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span>:移除一个元素</div><div class="line"><span class="keyword">boolean</span> <span class="title">removeAll</span><span class="params">(Collection c)</span>:移除一个集合的元素</div></pre></td></tr></table></figure>
<h4 id="判断功能"><a href="#判断功能" class="headerlink" title="判断功能"></a>判断功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span>：判断集合中是否包含指定的元素</span></div><div class="line"><span class="keyword">boolean</span> <span class="title">containsAll</span><span class="params">(Collection c)</span>：判断集合中是否包含指定的集合元素<span class="params">(包含全部)</span></div><div class="line"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span>：判断集合是否为空</div></pre></td></tr></table></figure>
<h4 id="遍历功能"><a href="#遍历功能" class="headerlink" title="遍历功能"></a>遍历功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span><span class="params">(重点)</span></span></div></pre></td></tr></table></figure>
<h4 id="长度功能"><a href="#长度功能" class="headerlink" title="长度功能"></a>长度功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span>:元素的个数，数组是length，string是length（）方法</span></div></pre></td></tr></table></figure>
<h4 id="交集功能"><a href="#交集功能" class="headerlink" title="交集功能"></a>交集功能</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">retainAll</span><span class="params">(Collection c)</span>:最终的结果保存在调用者，<span class="keyword">boolean</span>表示调用者是否发生改变，可以判断两个集合是否相等，只有两个集合相等时，才返回<span class="keyword">false</span></span></div></pre></td></tr></table></figure>
<h4 id="把集合转换为数组"><a href="#把集合转换为数组" class="headerlink" title="把集合转换为数组"></a>把集合转换为数组</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Object[] toArray()作用可以实现集合的遍历</div></pre></td></tr></table></figure>
<h4 id="成员方法iterator"><a href="#成员方法iterator" class="headerlink" title="成员方法iterator"></a>成员方法iterator</h4><p>迭代器，集合的专用遍历方式</p>
<ul>
<li>Object next():获取元素,并移动到下一个位置。</li>
</ul>
<p>NoSuchElementException：没有这样的元素，因为你已经找到最后了。</p>
<ul>
<li>boolean hasNext():如果仍有元素可以迭代（是不是有下一个）则返回 true。</li>
</ul>
<p>注意以下两端代码含义相同：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Collection c = <span class="keyword">new</span> ArrayList();		</div><div class="line">Iterator it = c.iterator();</div><div class="line"><span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">	Student s = (Student) it.next();</div><div class="line">	System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (Iterator it = c.iterator(); it.hasNext();) &#123;</div><div class="line">	Student s = (Student) it.next();</div><div class="line">	System.out.println(s.getName() + <span class="string">"---"</span> + s.getAge());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：</p>
<p>不要多次使用it.next()方法，因为每次使用都是访问一个对象，可能出现NoSuchElementException 不要多次使用it.next()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">System.out.println(((Student) it.next()).getName() + <span class="string">"---"</span></div><div class="line">+ ((Student) it.next()).getAge());</div></pre></td></tr></table></figure>
<p>打印出的年龄和姓名不是同一个人，因为每次调用next方法，都会向下移动光标。</p>
<p>使用步骤：</p>
<ol>
<li>通过集合对象获取迭代器对象</li>
<li>通过迭代器的hasNext判断是否有元素</li>
<li>同构迭代器对象的next方法获取元素并移动到下一个位置</li>
</ol>
<h4 id="迭代器为什么不定义成一个类"><a href="#迭代器为什么不定义成一个类" class="headerlink" title="迭代器为什么不定义成一个类"></a>迭代器为什么不定义成一个类</h4><p>java中的集合类有很多，而且他们的数据结构不同，存储方式也不同，遍历方式也不同，所以没有定义成迭代器类。而所有的集合都应该有获取元素的操作，所以把他们提取成接口。<strong>真正的实现类在子类的内部类中</strong>。</p>
<h2 id="List类"><a href="#List类" class="headerlink" title="List类"></a>List类</h2><p>是有序的collection集合（进来有序，出去也有序）可以在每个位置精确控制每个元素，可以使用索引来控制。允许重复的元素。</p>
<h3 id="添加功能-1"><a href="#添加功能-1" class="headerlink" title="添加功能"></a>添加功能</h3><p>void add(int index,Object element):在指定位置添加元素</p>
<p>在元素个数+1可以，超过会报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">List list = <span class="keyword">new</span> ArrayList();</div><div class="line"></div><div class="line"><span class="comment">// 添加元素</span></div><div class="line">list.add(<span class="string">"hello"</span>);</div><div class="line">list.add(<span class="string">"world"</span>);</div><div class="line">list.add(<span class="string">"java"</span>);</div><div class="line"></div><div class="line"> <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index,Object element)</span>:在指定位置添加元素</span></div><div class="line"> list.<span class="title">add</span><span class="params">(<span class="number">1</span>, <span class="string">"android"</span>)</span>;<span class="comment">//没有问题</span></div><div class="line"> IndexOutOfBoundsException</div><div class="line"> list.add(<span class="number">11</span>, <span class="string">"javaee"</span>);<span class="comment">//有问题</span></div><div class="line"> list.add(<span class="number">3</span>, <span class="string">"javaee"</span>); <span class="comment">//没有问题</span></div><div class="line"> list.add(<span class="number">4</span>, <span class="string">"javaee"</span>); <span class="comment">//有问题</span></div></pre></td></tr></table></figure>
<p>###获取功能</p>
<p>Object get(int index):获取指定位置的元素</p>
<blockquote>
<p>List集合的特有遍历功能：size()和get()方法结合使用</p>
</blockquote>
<h3 id="列表迭代器"><a href="#列表迭代器" class="headerlink" title="列表迭代器"></a>列表迭代器</h3><p>ListIterator listIterator()：List集合特有的迭代器，该迭代器继承了Iterator迭代器，所以，就可以直接使用hasNext()和next()方法。</p>
<blockquote>
<p>Object previous():获取上一个元素</p>
<p>boolean hasPrevious():判断是否有元素</p>
</blockquote>
<p>可能会报错<strong>NoSuchElementException</strong>没有标签，越界</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">// 创建List集合对象</span></div><div class="line">	List list = <span class="keyword">new</span> ArrayList();</div><div class="line">	list.add(<span class="string">"hello"</span>);</div><div class="line">	list.add(<span class="string">"world"</span>);</div><div class="line">	list.add(<span class="string">"java"</span>);</div><div class="line"></div><div class="line">	<span class="comment">// ListIterator listIterator()</span></div><div class="line">	ListIterator lit = list.listIterator(); <span class="comment">// 子类对象</span></div><div class="line"></div><div class="line">	<span class="keyword">while</span> (lit.hasPrevious()) &#123;</div><div class="line">		String s = (String) lit.previous();</div><div class="line">		System.out.println(s);</div><div class="line">	&#125;</div><div class="line">	System.out.println(<span class="string">"-----------------"</span>);</div><div class="line"></div><div class="line">	<span class="comment">// 迭代器</span></div><div class="line">	Iterator it = list.iterator();</div><div class="line">	<span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">		String s = (String) it.next();</div><div class="line">		System.out.println(s);</div><div class="line">	&#125;</div><div class="line">	System.out.println(<span class="string">"-----------------"</span>);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意：ListIterator可以实现逆向遍历，但是必须先正向遍历，才能逆向遍历，所以一般无意义，不使用。</p>
<h3 id="删除功能-1"><a href="#删除功能-1" class="headerlink" title="删除功能"></a>删除功能</h3><p>Object remove(int index)：根据索引删除元素,返回被删除的元素</p>
<h3 id="修改功能"><a href="#修改功能" class="headerlink" title="修改功能"></a>修改功能</h3><p>Object set(int index,Object element):根据索引修改元素，返回被修饰的元素</p>
<h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><p>我有一个集合，如下，请问，我想判断里面有没有”world”这个元素，如果有，我就添加一个”javaee”元素，请写代码实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">List list = <span class="keyword">new</span> ArrayList();</div><div class="line"><span class="comment">// 添加元素</span></div><div class="line">list.add(<span class="string">"hello"</span>);</div><div class="line">list.add(<span class="string">"world"</span>);</div><div class="line">list.add(<span class="string">"java"</span>);</div><div class="line"></div><div class="line"><span class="comment">// 迭代器遍历</span></div><div class="line">Iterator it = list.iterator();</div><div class="line"><span class="keyword">while</span> (it.hasNext()) &#123;</div><div class="line">	String s = (String) it.next();</div><div class="line">	<span class="keyword">if</span> (<span class="string">"world"</span>.equals(s)) &#123;</div><div class="line">		list.add(<span class="string">"javaee"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>会报错：ConcurrentModificationException</p>
<p>原因：迭代器是依赖于集合而存在的，在判断成功后，集合的中新添加了元素，而迭代器却不知道，所以就报错了，这个错叫并发修改异常。</p>
<p>其实这个问题描述的是：迭代器遍历元素的时候，通过集合是不能修改元素的。</p>
<p>解决办法：</p>
<ol>
<li>迭代器迭代元素，迭代器修改元素，<strong>新添加的元素是跟在刚才迭代的元素后面的</strong></li>
<li>集合遍历元素，集合修改元素(普通for)<strong>新添加的元素在最后添加的</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方式1：迭代器迭代元素，迭代器修改元素</span></div><div class="line"><span class="comment">// 而Iterator迭代器却没有添加功能，所以我们使用其子接口ListIterator</span></div><div class="line">ListIterator lit = list.listIterator();</div><div class="line"><span class="keyword">while</span> (lit.hasNext()) &#123;</div><div class="line">	String s = (String) lit.next();</div><div class="line">	<span class="keyword">if</span> (<span class="string">"world"</span>.equals(s)) &#123;</div><div class="line">		lit.add(<span class="string">"javaee"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 方式2：集合遍历元素，集合修改元素(普通for)</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; list.size(); x++) &#123;</div><div class="line">	String s = (String) list.get(x);</div><div class="line">	<span class="keyword">if</span> (<span class="string">"world"</span>.equals(s)) &#123;</div><div class="line">		list.add(<span class="string">"javaee"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Java/">Java</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java基础知识/">Java基础知识</a>
    </span>
    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2017/03/13/Java学习笔记_day15/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>




<nav class="pagination">
  
  <a href="/" class="pagination-prev">上一页</a>
  
  
  <a href="/page/3/" class="pagination-next">下一页</a>
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 天意
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>